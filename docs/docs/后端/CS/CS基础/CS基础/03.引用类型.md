# 引用类型

C# 中有两种类型：引用类型和值类型。 引用类型的变量存储对其数据（对象）的引用，而值类型的变量直接包含其数据。 对于引用类型，两种变量可引用同一对象；因此，对一个变量执行的操作会影响另一个变量所引用的对象。 对于值类型，每个变量都具有其自己的数据副本，

下列关键字用于声明引用类型：

- [class](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/class)
- [interface](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/interface)
- [delegate](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/reference-types#the-delegate-type)
- [record](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/record)

C# 也提供了下列内置引用类型：

- [dynamic](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/reference-types#the-dynamic-type)
- [object](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/reference-types#the-object-type)
- [string](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/reference-types#the-string-type)

## 1.object

`object` 类型是 [System.Object](https://learn.microsoft.com/zh-cn/dotnet/api/system.object) 在 .NET 中的别名。 

在 C# 的统一类型系统中，所有类型（预定义类型、用户定义类型、引用类型和值类型）都是直接或间接从 [System.Object](https://learn.microsoft.com/zh-cn/dotnet/api/system.object) 继承的。

- 可以将任何类型的值赋给 `object` 类型的变量。 
- 可以使用文本 `null` 将任何 `object` 变量赋值给其默认值。 
- 将值类型的变量转换为对象的过程称为装箱。
-  将 `object` 类型的变量转换为值类型的过程称为取消装箱。 有关详细信息，请参阅[装箱和取消装箱](https://learn.microsoft.com/zh-cn/dotnet/csharp/programming-guide/types/boxing-and-unboxing)。



### 1.1 装箱和取消装箱

- 装箱是将[值类型](https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/value-types)转换为 `object` 类型或由此值类型实现的任何接口类型的过程。 
- 常见语言运行时 (CLR) 对值类型进行装箱时，会将值包装在 [System.Object](https://learn.microsoft.com/zh-cn/dotnet/api/system.object) 实例中并将其存储在托管堆中。
- 取消装箱将从对象中提取值类型。
- 装箱是隐式的；取消装箱是显式的。
- 装箱和取消装箱的概念是类型系统 C# 统一视图的基础，其中任一类型的值都被视为一个对象。

下例将整型变量 `i` 进行了装箱并分配给对象 `o`。

```cs
int i = 123;
object o = i;		// 装箱
```

然后，可以将对象 `o` 取消装箱并分配给整型变量 `i`：

```cs
o = 123;
i = (int)o;  // 取消装箱
```



## 2.string

### 2.1 创建字符串

`string` 类型表示零个或多个 Unicode 字符的序列。 `string` 是 [System.String](https://learn.microsoft.com/zh-cn/dotnet/api/system.string) 在 .NET 中的别名。

字符串需要放在**双引号内**

以下方法用来创建一个字符串：

- 通过将一个字符串文字分配给一个`String`变量

```cs
string str="这是一个字符串";
```

- 通过使用`String`类构造函数

```cs
char[] letters = { 'H', 'e', 'l', 'l','o' };
string greetings = new string(letters);
Console.WriteLine("Greetings: {0}", greetings);
```

- 通过使用字符串连接运算符(`+`)

```cs
string fname="蔡",
string lname="徐坤",

string fullname = fname + lname;
```

- 通过检索属性或调用返回字符串的方法

- 通过调用格式化方法将值或对象转换为其字符串表示形式

```c++
DateTime waiting = new DateTime(2012, 10, 10, 17, 58, 1);
string chat = String.Format("Message sent at {0:t} on {0:D}", waiting);
```



### 2.3 String类属性

`String`类具有以下两个属性：

| 属性    | 说明                                         |
| ------- | -------------------------------------------- |
| Chars[] | 获取当前`String`对象中指定位置的`Char`对象。 |
| Length  | 获取当前`String`对象中的字符数。             |

Chars[]获取指定位置字符

```cs
string a = "hello";
Console.WriteLine(a[0]);		// h
Console.WriteLine(a[1]);		// e
Console.WriteLine(a[2]);		// l
Console.WriteLine(a[3]);		// l
Console.WriteLine(a[4]);		// o
```

Length获取字符串长度

```cs
string a = "hello";
Console.WriteLine(a.Length);        // 5
```



### 2.4 运算符

#### 2.4.1 相等

尽管 `string` 为引用类型，但是两个字符串比较时，比较的是其值，因为重写了==运算符

```cs
public static bool operator == (string? a, string? b);
public static bool operator != (string? a, string? b);
```

 参数

- a：[String](https://learn.microsoft.com/zh-cn/dotnet/api/system.string?view=net-6.0)要比较的第一个字符串，或 `null`。

- b：[String](https://learn.microsoft.com/zh-cn/dotnet/api/system.string?view=net-6.0)要比较的第二个字符串，或 `null`。

返回

- [Boolean](https://learn.microsoft.com/zh-cn/dotnet/api/system.boolean?view=net-6.0)如果 `a` 的值与 `b` 的值相同，则为 `true`；否则为 `false`。

```c++
string str1 = "你好";
string str2 = "你好";

Console.WriteLine(str1==str2);      // True
Console.WriteLine(str1!=str2);      // False
```



#### 2.4.2 加号

`+`可以拼接字符串，并且不同类型的变量都可以拼接

```c++
 string str1 = "你好"+"，"+"我好"+"，"+"她也好";
 Console.WriteLine(str1);      // 你好，我好，她也好

 string str2 = "我今天要吃"+100+"份冰淇淋";
 Console.WriteLine(str2);      //我今天要吃100份冰淇淋

 string str3 = "布尔值有"+true+"和"+false;
 Console.WriteLine(str3);      //布尔值有True和False
```





### 2.5 String类方法

看文档：https://learn.microsoft.com/zh-cn/dotnet/api/system.string.clone?view=net-6.0





