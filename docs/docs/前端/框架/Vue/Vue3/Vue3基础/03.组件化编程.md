# 组件化编程

## 1.单文件组件

一个 Vue 单文件组件 (SFC)，通常使用 `*.vue` 作为文件扩展名，它是一种使用了类似 HTML 语法的自定义文件格式，用于定义 Vue 组件。一个 Vue 单文件组件在语法上是兼容 HTML 的。

每一个 `*.vue` 文件都由三种顶层语言块构成：`<template>`、`<script>` 和 `<style>`，以及一些其他的自定义块：

- `<template>`：用于写`Html`结构
- `<script>` ：用于写`js`语句
-  `<style>`：用于写`css`样式

```vue
<template>
  <div class="example">{{ msg }}</div>
</template>

<script>
export default {
  data() {
    return {
      msg: 'Hello world!'
    }
  }
}
</script>

<style>
.example {
  color: red;
}
</style>

<custom1>
  This could be e.g. documentation for the component.
</custom1>
```



## 2.预处理器

代码块可以使用 `lang` 这个属性来声明预处理器语言，最常见的用例就是在 `<script>` 中使用 TypeScript：

```html
<script lang="ts">
  // use TypeScript
</script>
```

也可以`lang` 在任意块上都能使用，比如我们可以在 `<style>` 标签中使用 [Sass](https://sass-lang.com/) 或是 `<template>` 中使用 [Pug](https://pugjs.org/api/getting-started.html)：

```vue
<template lang="pug">
p {{ msg }}
</template>

<style lang="scss">
  $primary-color: #333;
  body {
    color: $primary-color;
  }
</style>
```



## 3.普通组件

大部分组件都是普通组件

需要使用Es模块导入使用

```vue {3,8}
<template>
  <div>
    <Child/>
  </div>
</template>

<script setup>
import Child from './Child'
</script>
```





## 4.全局组件

全局注册的组件，不需要导入就能直接使用，例如组件库中的组件

全局注册组件需要在`main.js`中使用`app.component()`方法注册，`app.component()`返回Vue实例，因此可以链式调用

:::code-group

```js [main.js] {2,6}
import { createApp } from 'vue'
import myInput from './MyInput'

const app = createApp({})

app.component('MyInput', MyInput)

app.mount('#app')
```

:::

`app.component()的`参数：

- 第一个：全局注册的组件的名字
- 第二个：组件的内容



`app.component()`也可以注册一个局部组件，第二个参数为一个对象，其中写选项式Api

```js
app.component('MyButton', {
  data() {
    return {
      num: 111
    }
  },
  template: `<button><slot></slot>{{num}}</button>`
})
```

但是可能会报如下错误

`Component provided template option but runtime compilation is not supported in this build of Vue.`

解决办法需要在`vite.config.js`写如下配置

:::code-group

```js [vite.config.js] {5}
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      vue: 'vue/dist/vue.esm-bundler.js'
    }
  }
})
```

:::





## 5.动态组件

动态组件需要使用一个`<component>`标签，然后通过动态绑定一个`is`属性来指定组件

```vue
<template>
  <div>
      <button @click="changeTab">切换</button>
    <component :is="tab"></component>
  </div>
</template>

<script setup>
import {ref} from 'vue'
import Tab1 from './Tab1'
import Tab2 from './Tab2'

const tab=ref(Tab1)
    
const changeTab=()=>{
    tab.value=Tab2
}
</script>
```

这样可以通过一个tab变量，切换不同的组件
