# 八、浮动

## 1. CSS布局的三种机制

CSS 提供了3种机制来设置盒子的摆放位置，分别是普通流（标准流）、浮动和定位，其中：

### 1.1 普通流（标准流）

- 块级元素会独占一行，从上向下顺序排列；

- 常用元素：div、hr、p、h1~h6、ul、ol、dl、form、table

- 行内元素会按照顺序，从左到右顺序排列，碰到父元素边缘则自动换行；

- 常用元素：span、a、i、em等

### 1.2 浮动

- 让盒子从普通流中浮起来,主要作用让多个块级盒子一行显示。

### 1.3 定位

- 将盒子定在浏览器的某一个位置——CSS 离不开定位，特别是后面的 js 特效。

## 2.什么是浮动

元素的浮动是指设置了浮动属性的元素会漂浮

### 2.1 作用

1. **让多个盒子(div)水平排列成一行**，使得浮动称为布局的重要手段。
1. 可以实现盒子的左右对齐等等。
1. 浮动最早是用来控制图片，实现文字环绕图片效果。
1. 浮动元素之前的元素将不会受到影响。
1. **脱离标准普通流的控制**，**不占位置**，脱标

### 2.2 语法

```css
选择器 { 
    float: 属性值;
}
```

| 属性值 | 描述 |
| - | - |
| none | 元素不浮动（默认值） |
| left | 元素向左浮动 |
| right | 元素向右浮动 |

- **浮动只会影响当前的或者是后面的标准流盒子，不会影响前面的标准流**。
- 建议:如果一个盒子里面有多个子盒子，如果其中一个盒子浮动了，其他兄弟也应该浮动。防止引起问题

### 2.3 实例

正常三个div的排列顺序

```html
<style>
    div{
        width: 200px;
        height: 200px;
        background-color: aqua;
        margin-top: 10px;
    }
</style>

<body>
    <div></div>
    <div></div>
    <div></div>
</body>
```

![image-20230611194814954](https://gitee.com/xarzhi/picture/raw/master/img/image-20230611194814954.png)

给div添加浮动后

![image-20230611194829378](https://gitee.com/xarzhi/picture/raw/master/img/image-20230611194829378.png)

一个元素浮动，不会影响前面的元素，浮动相当于漂浮，不占有原来的位置，所以该浮动元素后面的元素会到浮动元素的下面

```html
<style>
    .float{
        width: 200px;
        height: 200px;
        background-color: aqua;
        margin-top: 10px;
        border: 1px solid #000;
        float: left;
    }
</style>

<body>
    <div class="float"></div>
    <div class="float"></div>
    <div class="nofloat"></div>
</body>
```

![image-20230611195204053](https://gitee.com/xarzhi/picture/raw/master/img/image-20230611195204053.png)

由此可看出，前两个盒子浮动，所以这两个盒子并排排列，但第三个盒子没有浮动，所以他跑到了第一个盒子下面

## 3.清除浮动

因为父级盒子很多情况下，不方便给高度，但是子盒子浮动就不占有位置，最后父级盒子高度为0，就影响了下面的标准流盒子。

清除浮动本质清除浮动主要为了**解决父级元素因为子级浮动引起内部高度为0** 的问题。清除浮动之后， 父级就会根据浮动的子盒子自动检测高度。父级有了高度，就不会影响下面的标准流了

### 3.1 清除浮动的方法

#### 3.1.1 额外标签法(隔墙法)

是W3C推荐的做法是通过在浮动元素末尾添加一个空的标签例如，或则其他标签br等亦可。

```html
<div style="clear:both"></div>
```

- 优点：通俗易懂，书写方便
- 缺点：添加许多无意义的标签，结构化较差。

```css
选择器 { 
    clear: 属性值;
}  
```

| 属性值 | 描述                                       |
| ------ | ------------------------------------------ |
| left   | 不允许左侧有浮动元素（清除左侧浮动的影响） |
| right  | 不允许右侧有浮动元素（清除右侧浮动的影响） |
| both   | 同时清除左右两侧浮动的影响                 |


实际工作中,几乎只用clear: both

#### 3.1.2 父级添加overflow

```css
父元素{
    overflow: hidden;
}
```

- 优点： 代码简洁

- 缺点： 内容增多时候容易造成不会自动换行导致内容被隐藏掉，无法显示需要溢出的元素。

#### 3.1.3 伪元素after

清除浮动:after 方式为空元素额外标签法的升级版，好处是不用单独加标签了

```css
.clearfix:after {
    content: "";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

/* IE6、7 专有 */
.clearfix {
    *zoom: 1;
}
```

- 优点：符合闭合浮动思想  结构语义化正确

- 缺点：由于IE6-7不支持:after，使用 zoom:1触发 hasLayout。

#### 3.1.4 双伪元素

```css
.clearfix:before,
.clearfix:after {
    content: "";
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}
```

- 优点： 代码更简洁

- 缺点： 由于IE6-7不支持:after，使用 zoom:1触发 hasLayout。

### 3.2 清除浮动总结

什么时候用清除浮动呢？

1. 父级没高度

1. 子盒子浮动了

1. 影响下面布局了，我们就应该清除浮动了。

| 清除浮动的方式 | 优点 | 缺点 |
| - | - | - |
| 额外标签法（隔墙法） | 通俗易懂，书写方便 | 添加许多无意义的标签，结构化较差。 |
| 父级overflow:hidden; | 书写简单 | 溢出隐藏 |
| 父级after伪元素 | 结构语义化正确 | 由于IE6-7不支持:after，兼容性问题 |
| 父级双伪元素 | 结构语义化正确 | 由于IE6-7不支持:after，兼容性问题 |

