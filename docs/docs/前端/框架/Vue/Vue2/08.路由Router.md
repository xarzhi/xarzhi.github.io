# å…«ã€è·¯ç”±Router

## 1. ç›¸å…³ç†è§£

### 1.1 vue-router çš„ç†è§£

vueçš„ä¸€ä¸ªæ’ä»¶åº“ï¼Œä¸“é—¨ç”¨æ¥å®ç°SPAå•é¡µé¢åº”ç”¨

### 1.2 å¯¹SPAåº”ç”¨çš„ç†è§£

1. **å•é¡µWebåº”ç”¨**ï¼ˆsingle page web applicationï¼ŒSPAï¼‰

1. æ•´ä¸ªåº”ç”¨**åªæœ‰ä¸€ä¸ªå®Œæ•´çš„é¡µé¢**

1. ç‚¹å‡»é¡µé¢ä¸­çš„å¯¼èˆªé“¾æ¥**ä¸ä¼šåˆ·æ–°é¡µé¢**ï¼Œ**åªä¼šåšé¡µé¢çš„å±€éƒ¨æ›´æ–°**

1. æ•°æ®éœ€è¦é€šè¿‡**ajax**è¯·æ±‚è·å–



### 1.3 è·¯ç”±çš„ç†è§£

1. ä»€ä¹ˆæ˜¯è·¯ç”±?
   1. ä¸€ä¸ªè·¯ç”±å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey - valueï¼‰

   1. **key**ä¸º**è·¯å¾„**ï¼Œ**value**å¯èƒ½æ˜¯**function**æˆ–**componen**

1. è·¯ç”±åˆ†ç±»
   1. åç«¯è·¯ç”±
      1. ç†è§£ï¼š**value**æ˜¯**function**ï¼Œç”¨äº**å¤„ç†å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚**

      1. å·¥ä½œè¿‡ç¨‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæ ¹æ®è¯·æ±‚è·¯å¾„æ‰¾åˆ°åŒ¹é…çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®

   1. å‰ç«¯è·¯ç”±
      1. ç†è§£ï¼š**value**æ˜¯**component**ï¼Œç”¨äº**å±•ç¤ºé¡µé¢å†…å®¹**

      1. å·¥ä½œè¿‡ç¨‹ï¼šå½“æµè§ˆå™¨çš„è·¯å¾„æ”¹å˜æ—¶ï¼Œå¯¹åº”çš„ç»„ä»¶å°±ä¼šæ˜¾ç¤º


## 2. åŸºæœ¬è·¯ç”±

### ä½¿ç”¨æ­¥éª¤

#### 1.å®‰è£…vue-router

- å‘½ä»¤è¡Œä¸‹è½½`npm i vue-router@3`
- æ³¨æ„ï¼š**vue2**éœ€è¦ä¸‹è½½**vue-router@3**ç‰ˆæœ¬ï¼Œ**vue3**éœ€è¦ä¸‹è½½**vue-router@4**ç‰ˆæœ¬

#### 2.é…ç½®main.js

ï¼ˆ1ï¼‰å¼•å…¥**VueRouter**å’Œ**router**,  **router**æ˜¯ä¸‹é¢éœ€è¦åˆ›å»ºçš„**è·¯ç”±é…ç½®æ–‡ä»¶**

> main.js

```js
import VueRouter from 'vue-router'
import router from './router' //å¦‚æœæ–‡ä»¶å¤¹ä¸‹åªæœ‰ä¸€ä¸ªindex.jsæ–‡ä»¶ï¼Œè·¯å¾„å†™åˆ°æ–‡ä»¶å¤¹å°±è¡Œ
```

ï¼ˆ2ï¼‰ä½¿ç”¨**VueRouter**

`Vue.use(VueRouter)`

ï¼ˆ3ï¼‰åœ¨**new Vue({})**ä¸­æ·»åŠ **router:router**é…ç½®é¡¹ï¼Œç®€å†™**router**

src/main.js

```js
import Vue from 'vue'
import App from './App.vue'

import VueRouter from 'vue-router'
import router from './router'

Vue.config.productionTip = false

Vue.use(router)

new Vue({
Â  router,
Â  render: h => h(App),
}).$mount('#app')
```

#### 3.åˆ›å»ºè·¯ç”±ç»„ä»¶

1. åˆ›å»º**pages**æ–‡ä»¶å¤¹ï¼Œè·¯ç”±ç»„ä»¶åœ¨æ­¤æ–‡ä»¶å¤¹å†…åˆ›å»º

1. è·¯ç”±ç»„ä»¶å’Œæ™®é€šç»„ä»¶ä¸€æ ·ï¼Œå•ç‹¬æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œæ˜¯ä¸ºäº†åˆ†ç±»



#### 4.é…ç½®router

ï¼ˆ1ï¼‰åœ¨srcä¸‹åˆ›å»º**router**æ–‡ä»¶å¤¹å¹¶åˆ›å»º**index.js**æ–‡ä»¶

ï¼ˆ2ï¼‰å¼•å…¥vueè·¯ç”±**VueRouter**

```js
import VueRouter from 'vue-router'
```

ï¼ˆ3ï¼‰å¼•å…¥è·¯ç”±ç»„ä»¶

```js
import About from '../pages/About'
import Home from '../pages/Home'
```

ï¼ˆ4ï¼‰åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨

1. **VueRouter**é‡Œæœ‰ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼Œè·¯ç”±ä»¥**æ•°ç»„**çš„æ ¼å¼å­˜æ”¾åœ¨**routes**å±æ€§ï¼Œæ¯ä¸ªå•ç‹¬è·¯ç”±æ˜¯ä¸€ä¸ª**å¯¹è±¡**

   å¯¹è±¡æœ‰åŸºæœ¬çš„**path**,**component**å±æ€§

   - pathæ˜¯è·¯å¾„

   - componentæ˜¯ç»„ä»¶å

1. ç”±äºç½‘é¡µæ‰“å¼€é»˜è®¤è·¯ç”±è·¯å¾„æ˜¯`"/"`ï¼Œæ²¡æœ‰å®é™…å†…å®¹ï¼Œå¯ä»¥åœ¨**routes**æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå¯¹è±¡,ç”¨`redirect:'/home'` å±æ€§å¼ºåˆ¶ä¿®æ”¹urlä¸Šçš„è·¯å¾„

src/router/index.js

```js
import VueRouter from 'vue-router';
import About from '../pages/About'
import Home from '../pages/Home'

export default new VueRouter({
Â  Â  routes:[
        {
Â  Â  Â  Â  Â  Â  path:'/',       // ç½‘é¡µæ‰“å¼€é»˜è®¤è·¯ç”±è·¯å¾„æ˜¯"/"
Â  Â  Â  Â  Â  Â  redirect:'/home'      //å¼ºåˆ¶ä¿®æ”¹urlä¸Šçš„è·¯å¾„ä¸º  /home
Â  Â  Â  Â  },
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  path:'/about',    //è·¯å¾„å‰è¦åŠ     /
Â  Â  Â  Â  Â  Â  component:About
Â  Â  Â  Â  },
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  path:'/home',
Â  Â  Â  Â  Â  Â  component:Home
Â  Â  Â  Â  }
Â  Â  ]
})
```

#### 5.å®ç°åˆ‡æ¢

1. ç»„ä»¶å†…**éœ€è¦æ·»åŠ è·¯ç”±çš„åœ°æ–¹**æ·»åŠ `<router-link></router-link>`æ ‡ç­¾ï¼Œæµè§ˆå™¨ä¼šè¢«**æ›¿æ¢ä¸ºaæ ‡ç­¾**
   - **to**å±æ€§ç”¨æ¥è®¾ç½®éœ€è¦è·³è½¬çš„**è·¯ç”±ç»„ä»¶è·¯å¾„**

   - **active-class**å±æ€§å¯é…ç½®é€‰ä¸­ç±»åï¼Œæ ·å¼éœ€è¦åœ¨cssä¸­è®¾ç½®


```html
.active{
	color: red;
}
...
<router-link active-class="active" to="/about">About</router-link>
```

#### 6.æŒ‡å®šå±•ç¤ºä½

1. åœ¨ç»„ä»¶å†…éœ€è¦æ˜¾ç¤ºè·¯ç”±çš„åœ°æ–¹æ·»åŠ `<router-view></router-view>`





## 3. å‡ ä¸ªæ³¨æ„äº‹é¡¹

1. è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨**pages**æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨**components**æ–‡ä»¶å¤¹

1. é€šè¿‡åˆ‡æ¢ï¼Œâ€œéšè—â€äº†çš„è·¯ç”±ç»„ä»¶ï¼Œ**é»˜è®¤æ˜¯è¢«é”€æ¯æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½**

1. æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„**$route**å±æ€§ï¼Œé‡Œé¢**å­˜å‚¨ç€è‡ªå·±çš„è·¯ç”±ä¿¡æ¯**

1. æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª**router**ï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„**$router**å±æ€§è·å–åˆ°

1. **é‡å®šå‘å’Œåˆ«å**
   1. redirect:"è·¯å¾„"    é‡å®šå‘/è·³è½¬
   1. alias:''è·¯å¾„åˆ«å"


æµè§ˆå™¨åœ°å€æ”¹å˜åï¼Œä¼šåœ¨routesä¸­å¯»æ‰¾è·¯å¾„å¯¹åº”çš„è·¯ç”±ç»„ä»¶

- ç¬¬ä¸€ä¸ªpathåŒ¹é…åï¼Œå°±ä¸ä¼šç»§ç»­èµ°ä¸‹ä¸€ä¸ª
- å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼š404

```js
const router = new VueRouter({
 routes: [
     {path:"è·¯å¾„" , name:"", component:ç»„ä»¶å, }
     {path:"è·¯å¾„" , name:"", component:ç»„ä»¶å, }
     {path:"*" , redirect:"è·¯å¾„", alias:"è·¯å¾„åˆ«å"}
 ]
})
```

pathæ”¯æŒé€šé…ç¬¦`*`

```
  * 	  é€šé…ï¼Œè¡¨ç¤ºåŒ¹é…æ‰€æœ‰path
  my-*    è¡¨ç¤ºmy-å¼€å¤´çš„å°±åŒ¹é…   
```

å¦‚æ­¤ï¼Œå°±å¯ä»¥åœ¨æœ€åå¢åŠ ä¸€ä¸ªè·¯ç”±é…ç½®ï¼Œ`path`ä¸º`"*"`ï¼Œå†ç”¨`redirect:'/404'`é‡å®šå‘ï¼Œå½“ç½‘å€é”™è¯¯æ—¶è‡ªåŠ¨è·³è½¬404é¡µé¢

```js
{ path:"*" , redirect:"/404", component:Err404 }
```



---

## 4. åµŒå¥—è·¯ç”±å’Œå‘½åè§†å›¾

### 1.åµŒå¥—è·¯ç”±

1. é…ç½®è·¯ç”±è§„åˆ™ï¼Œåœ¨éœ€è¦åµŒå¥—çš„ç»„ä»¶è·¯å¾„ä¸­ï¼Œä½¿ç”¨**children**å±æ€§ï¼Œ**childrenæ˜¯ä¸ªæ•°ç»„**ï¼Œå­è·¯ç”±ç»„ä»¶æ˜¯**å¯¹è±¡**

#### æ­¥éª¤

1.åˆ›å»º**äºŒçº§è·¯ç”±ç»„ä»¶**

- ä¸ºäº†æ–¹ä¾¿æ•´ç†ï¼Œå¯ä»¥åœ¨pagesé‡Œå†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œè¾¹å­˜æ”¾äºŒçº§è·¯ç”±ç»„ä»¶



2.é…ç½®router.js

ï¼ˆ1ï¼‰åŒæ ·éœ€è¦**å…ˆå¼•å…¥è·¯ç”±ç»„ä»¶**

```js
import Child1 from '../pages/ChildRoute/Child1'
import Child2 from '../pages/ChildRoute/Child2'
```



ï¼ˆ2ï¼‰åœ¨ä¸€çº§è·¯ç”±ç»„ä»¶çš„å¯¹è±¡å†…æ·»åŠ **children**å±æ€§ï¼Œ**childrenæ˜¯ä¸ªæ•°ç»„**ï¼Œ**å­è·¯ç”±ç»„ä»¶æ˜¯å¯¹è±¡**

- **children**é‡ŒåŒæ ·æœ‰**path**ï¼Œå’Œ**component**å±æ€§ï¼Œæ³¨æ„**å­è·¯ç”±ç»„ä»¶çš„pathå€¼ä¸­ä¸èƒ½åŠ `/`**

router/index.js

```js
import VueRouter from 'vue-router'
// å¼•å…¥ç»„ä»¶
import Home from '../pages/Home'
import About from '../pages/About'
import Child1 from '../pages/ChildRoute/Child1'
import Child2 from '../pages/ChildRoute/Child2'

// åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨
export default new VueRouter({
Â  Â  routes: [
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  path:'/',
Â  Â  Â  Â  Â  Â  redirect:'/home'
Â  Â  Â  Â  },
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  path: '/home',
Â  Â  Â  Â  Â  Â  component: Home,
Â  Â  Â  Â  Â  Â  children:[
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  path:'child1', Â  Â  Â // æ­¤å¤„ä¸€å®šä¸è¦å¸¦æ–œæ    /
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  component:Child1 Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  path:'child2',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  component:Child2
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  },
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  path: '/about',
Â  Â  Â  Â  Â  Â  component: About
Â  Â  Â  Â  }
Â  Â  ]
})
```

3.è·³è½¬ï¼ˆè¦å†™å®Œæ•´è·¯å¾„ï¼‰

```html
<router-link to="/home/child1">News</router-link>
```

4.æŒ‡å®šå±•ç¤ºä½

1. ç»„ä»¶å†…éœ€è¦æ˜¾ç¤ºè·¯ç”±çš„åœ°æ–¹æ·»åŠ `<router-view></router-view>`



å¦‚æœè¦ç»§ç»­åµŒå¥—æ›´æ·±å±‚çš„è·¯ç”±ï¼Œç»§ç»­ç”¨childrenæ— é™å¥—å¨ƒï¼Œå·¥ä½œä¸­é¡¶å¤šå¥—ä¸‰å±‚



### 2.å‘½åè§†å›¾

ä¸€ä¸ªè·¯ç”±ï¼Œå¯ä»¥æ˜¾ç¤ºå¤šä¸ªç»„ä»¶ï¼Œå¹¶ä¸”ç»„ä»¶ä¸ºå…„å¼Ÿå…³ç³»

```html
<router-view></router-view>
<router-view name="a"></router-view>
<router-view name="b"></router-view>
```



```js
const foo={ template:`<h1>ä¸»é¡µé¢</h1>` }
const navbar={ template:`<h1>å¯¼èˆª</h1>` }
const footer={ template:`<h1>é¡µè„š</h1>` }

const router = new Router({
    routes:[
        path:'/',
        components:{
        	default:'foo',
        	a:navbar,
        	b:footer
        }
    ]
})
```



## 5. å‘½åè·¯ç”±



1.ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±çš„è·³è½¬

2.å¦‚ä½•ä½¿ç”¨

ï¼ˆ1ï¼‰ç»™è·¯ç”±å‘½å

åœ¨è·¯ç”±é…ç½®ä¸­æ·»åŠ `name`å±æ€§

```js
{
    path:'/demo',
    component:Demo,
    children:[
        {
            path:'test',
            component:Test,
            children:[
                {
                    name:'hello' // ç»™è·¯ç”±å‘½å
                    path:'welcome',
                    component:Hello,
                }
	    	]
	}
    ]
}
```

ï¼ˆ2ï¼‰ç®€åŒ–è·³è½¬ï¼Œä¸ç”¨å†™å¾ˆé•¿çš„è·¯å¾„å

æ³¨æ„ï¼šæƒ³è¦åœ¨toé‡Œç›´æ¥å†™è·¯ç”±çš„nameï¼Œå¿…é¡»ç»™**toåŠ¨æ€ç»‘å®š**ï¼Œä¸”**å†…å®¹å†™æˆå¯¹è±¡çš„æ–¹å¼**

```html
<!--ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ -->
<router-link to="/demo/test/welcome">è·³è½¬</router-link>

<!--ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ -->
<router-link :to="{name:'hello'}">è·³è½¬</router-link>

<!--ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° -->
<router-link 
	:to="{
	    name:'hello',
	    query:{
                id:666,
                title:'ä½ å¥½'
		}
	 }"
>è·³è½¬</router-link>
```





## 6. è·¯ç”± query ä¼ å‚

1.ä¼ é€’å‚æ•°

- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„**å­—ç¬¦ä¸²å†™æ³•**

```html
<router-link :to="`/home/message/detail?id=${m.id}&title=${m.title}`">è·³è½¬</router-link>
```

- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„**å¯¹è±¡å†™æ³•ï¼ˆæ¨èï¼‰** 

```html
<router-link 
    :to="{
    path:'/home/message/detail',
    query:{
        id: 1,
        title: 'æ ‡é¢˜'
    }
}"
>è·³è½¬</router-link>
```

2.æ¥æ”¶å‚æ•°

```js
//è§†å›¾ä¸­
$route.query.id
$route.query.title

//æ–¹æ³•ä¸­
this.$route.query.é”®
```







## 7. è·¯ç”± params ä¼ å‚

### 1.æ¥æ”¶paramså‚æ•°

**éœ€è¦åœ¨è·¯ç”±é…ç½®**ä¸­ï¼Œåœ¨pathè·¯å¾„åç”¨`:`å ä½ç¬¦**æ¥æ”¶**paramså‚æ•°ï¼Œä¸åŒçš„å‚æ•°ç”¨`/`åˆ†éš”

```js
{
    path:'/home',
    component:Home,
    children:[
        {
            path:'news',
            component:News
        },
        {
            component:Msg,
            children:[
                {
                    name:'detail',
                    path:'detail/:id/:title', // ğŸ”´ä½¿ç”¨:å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°
                    component:Detail
                }
            ]
        }
    ]
}
```

### 2.ä¼ é€’paramså‚æ•°

ç‰¹åˆ«æ³¨æ„ï¼šè·¯ç”±æºå¸¦paramså‚æ•°æ—¶ï¼Œ**è‹¥ä½¿ç”¨toçš„å¯¹è±¡å†™æ³•ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨pathé…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨nameé…ç½®ï¼**

- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„**å­—ç¬¦ä¸²å†™æ³•**

```html
<router-link to="/home/message/detail/666/ä½ å¥½">è·³è½¬</router-link>				
```

- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„**å¯¹è±¡å†™æ³•**

```html
<router-link 
    :to="{
        name:'detail',
        params:{
            id:666,
            title:'ä½ å¥½'
        }
    }"
>è·³è½¬</router-link>
```

3.æ¥æ”¶å‚æ•°

```js
$route.params.id
$route.params.title
```



**paramså’Œqueryçš„åŒºåˆ«**

1. **queryå¯ä»¥é€šè¿‡nameå±æ€§æˆ–è€…pathå±æ€§æ¥å¼•å…¥è·¯ç”±ï¼Œè€Œparamsåªèƒ½é€šè¿‡nameå±æ€§æ¥å¼•å…¥è·¯ç”±**ï¼›åœ¨ä½¿ç”¨paramsä¼ é€’æ—¶å¦‚æœæŒ‡å®šäº†pathå±æ€§è€Œæ²¡æœ‰nameå±æ€§ï¼Œé‚£ä¹ˆç•Œé¢èƒ½æˆåŠŸè·³è½¬ä½†æ˜¯ä¸èƒ½æ¥å—åˆ°ä¼ é€’è¿‡æ¥çš„å‚æ•°

1. **åœ¨åˆ·æ–°ç•Œé¢æ—¶ï¼Œqueryä¼ é€’çš„å‚æ•°ä¸ä¼šä¸¢å¤±ï¼Œè€Œparamsä¼šä¸¢å¤±**

1. ç›´ç™½çš„æ¥è¯´**queryç›¸å½“äºgetè¯·æ±‚**ï¼Œé¡µé¢è·³è½¬çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨åœ°å€æ çœ‹åˆ°è¯·æ±‚å‚æ•°ï¼Œè€Œ**paramsç›¸å½“äºpostè¯·æ±‚**ï¼Œå‚æ•°ä¸ä¼šå†åœ°å€æ ä¸­æ˜¾ç¤ºã€‚

## 8. è·¯ç”±çš„ props é…ç½®

propsä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°

```js
{
	name:'xiangqing',
	path:'detail/:id',
	component:Detail,

	//ç¬¬ä¸€ç§å†™æ³•ï¼špropså€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­æ‰€æœ‰çš„key-valueçš„ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶
	// props:{a:900}

	//ç¬¬äºŒç§å†™æ³•ï¼špropså€¼ä¸ºå¸ƒå°”å€¼ï¼Œä¸ºtrueæ—¶ï¼Œåˆ™æŠŠè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ ç»™Detailç»„ä»¶
	// props:true
	
	//ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶
         //åŸºç¡€å†™æ³•ä¸ºä¼ å…¥å®å‚$route,ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼
	props($route){
		return {
			id: $route.query.id,
			title: $route.query.title
		}
	}
}
```

src/router/index.js

```js
import VueRouter from "vue-router";
import Home from '../pages/Home'
import About from '../pages/About'
import News from '../pages/News'
import Message from '../pages/Message'
import Detail from '../pages/Detail'

export default new VueRouter({
  routes:[
    {
      path: '/about',
      component: About
    },
    {
      path:'/home',
      component:Home,
      children:[
        {
          path:'news',
          component:News
        },
        {
          path:'message',
          component:Message,
          children:[
            {
              name:'xiangqing',
              path:'detail/:id/:title',
              component:Detail,
              // propsçš„ç¬¬ä¸€ç§å†™æ³•ï¼Œå€¼ä¸ºå¯¹è±¡ï¼Œ
              // è¯¥å¯¹è±¡ä¸­çš„æ‰€æœ‰key-valueéƒ½ä¼šä»¥propsçš„å½¢å¼ä¼ ç»™Detailç»„ä»¶
              // props:{a:1,b:'hello'}

              // propsçš„ç¬¬äºŒç§å†™æ³•ï¼Œå€¼ä¸ºå¸ƒå°”å€¼ï¼Œ
              // è‹¥å¸ƒå°”å€¼ä¸ºçœŸï¼Œä¼šæŠŠè¯¥è·¯ç”±ç»„ä»¶æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°ï¼Œä»¥propsçš„å½¢å¼ä¼ ç»™Detailç»„ä»¶
              // props:true

              // propsçš„ç¬¬ä¸‰ç§å†™æ³•ï¼Œå€¼ä¸ºå‡½æ•°
              props(params) { // è¿™é‡Œå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼
                return {
                  id: params.id,
                  title: params.title,
                }
              }
            }
          ]
        }
      ]
    }
  ]
})
```

src/pages/Message.vue

```vue
<template>
	<div>
    <ul>
      <li v-for="m in messageList" :key="m.id">
        <router-link :to="{
                name:'xiangqing',
                params:{
                    id:m.id,
                    title:m.title
                }
         }">
          	{{m.title}}
  			</router-link>&nbsp;&nbsp;
  		</li>
  	</ul>
    <hr/>
    <router-view></router-view>
  </div>
</template>

<script>
    export default {
        name:'News',
        data(){
            return{
                messageList:[
                    {id:'001',title:'æ¶ˆæ¯001'},
                    {id:'002',title:'æ¶ˆæ¯002'},
                    {id:'003',title:'æ¶ˆæ¯003'}
                ]
            }
        }
    }
</script>
```

src/pages/Detail.vue

```vue
<template>
    <ul>
        <li>æ¶ˆæ¯ç¼–å·ï¼š{{ id }}</li>
        <li>æ¶ˆæ¯æ ‡é¢˜ï¼š{{ title }}</li>
    </ul>
</template>

<script>
    export default {
        name:'Detail',
        props:['id','title']
    }
</script>
```

## 9. è·¯ç”±è·³è½¬çš„ replace æ–¹æ³•

1. ä½œç”¨ï¼š**æ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼**ï¼Œå°±æ˜¯jsè·³è½¬è·¯ç”±
1. æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼š**push**å’Œ**replace**
   1. **push**æ˜¯**è¿½åŠ å†å²è®°å½•**ï¼Œè·¯ç”±è·³è½¬æ—¶å€™**é»˜è®¤ä¸ºpushæ–¹å¼**

   1. **replace**æ˜¯**æ›¿æ¢å½“å‰è®°å½•**
1. å¼€å¯**replace**æ¨¡å¼
   1. `<router-link :replace="true" ...>News</router-link>`

   1. ç®€å†™`<router-link replace ...>News</router-link>`


æ€»ç»“ï¼šæµè§ˆè®°å½•æœ¬è´¨æ˜¯ä¸€ä¸ª**æ ˆ**ï¼Œ**é»˜è®¤push**ï¼Œç‚¹å¼€æ–°é¡µé¢å°±ä¼šåœ¨æ ˆé¡¶è¿½åŠ ä¸€ä¸ªåœ°å€ï¼Œåé€€ï¼Œæ ˆé¡¶æŒ‡é’ˆå‘ä¸‹ç§»åŠ¨ï¼Œ**æ”¹ä¸ºreplaceå°±æ˜¯ä¸è¿½åŠ ï¼Œè€Œå°†æ ˆé¡¶åœ°å€æ›¿æ¢**

src/pages/Home.vue

```vue
<template>
  <div>
    <h2>Homeç»„ä»¶å†…å®¹</h2>
    <div>
      <ul class="nav nav-tabs">
        <li>
          <router-link replace class="list-group-item" active-class="active" 
                       to="/home/news">News</router-link>
    	</li>
        <li>
          <router-link replace class="list-group-item" active-class="active" 
                       to="/home/message">Message</router-link>
    	</li>
      </ul>
    <router-view></router-view>
    </div>
  </div>
</template>

<script>
  export default {
    name:'Home'
  }
</script>
```

## 10. ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª

ä½œç”¨ï¼šå®è´¨ä¸Šæ˜¯jsè·³è½¬è·¯ç”±ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»

`this.$router.push({})`     å†…ä¼ çš„å¯¹è±¡ä¸`<router-link>`ä¸­çš„toç›¸åŒ

```js
this.$router.push({
    path:'/è·¯å¾„', 
    query: {å‚æ•°å:å€¼} 
})

this.$router.push({ 
    name:'åç§°',
    params: {å‚æ•°å:å€¼} 
})

è·å–ï¼šthis.$route.query/params.å‚æ•°å
```

`this.$router.replace({ })`

è·¯ç”±çš„replaceè·³è½¬æ˜¯æ›¿æ¢æµè§ˆå™¨å½“å‰åœ°å€è®°å½•ï¼Œä¹Ÿå°±æ˜¯æ›¿æ¢æ ˆé¡¶

`this.$router.resolve({ })`

`this.$router.forward()`     å‰è¿›ï¼Œç›¸å½“äºæµè§ˆå™¨å‰è¿›

`this.$router.back()`         åé€€ï¼Œç›¸å½“äºæµè§ˆå™¨åé€€



`this.$router.go(n)`           å¯å‰è¿›ä¹Ÿå¯åé€€ï¼Œnä¸ºæ­£æ•°å‰è¿›nï¼Œä¸ºè´Ÿæ•°åé€€



## 11. ç¼“å­˜è·¯ç”±ç»„ä»¶

**ä½œç”¨**ï¼šè®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯

**ç”¨æ³•**ï¼š
1. åœ¨éœ€è¦ç¼“å­˜çš„ç»„ä»¶çš„çˆ¶ç»„ä»¶é‡Œçš„`<router-view></router-view>`å¤–é¢åŒ…å«ä¸Š`<keep-alive></keep-alive>`
1. includeå±æ€§å¯é€‰æ‹©éœ€è¦ç¼“å­˜çš„ç»„ä»¶

`keep-alive`å¯ä»¥è®¾ç½®ä»¥ä¸‹`props`å±æ€§ï¼š

- `include` - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚åªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜
- `exclude` - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜
- `max` - æ•°å­—ã€‚æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹


```vue
// ç¼“å­˜ä¸€ä¸ªè·¯ç”±ç»„ä»¶
<keep-alive include="News">
    <router-view></router-view>
</keep-alive>
// ç¼“å­˜å¤šä¸ªè·¯ç”±ç»„ä»¶ï¼Œæ³¨æ„åŠ¨æ€ç»‘å®š
<keep-alive :include="['News', 'Message']">
    <router-view></router-view>
</keep-alive>
```

è‹¥è¦ç¼“å­˜æ‰€æœ‰ç»„ä»¶ï¼Œåˆ™ä¸éœ€è¦åŠ include



## 12. ä¸¤ä¸ªæ–°ç”Ÿå‘½å‘¨æœŸé’©å­

1. **activated** è·¯ç”±ç»„ä»¶**è¢«æ¿€æ´»æ—¶è§¦å‘**

1. **deactivated** è·¯ç”±ç»„ä»¶**å¤±æ´»æ—¶è§¦å‘**

```js
//...
activated(){
	console.log('ç»„ä»¶æ¿€æ´»')
},
deactivated(){
	console.log('ç»„ä»¶å¤±æ´»')
}
//...
```



## 13. è·¯ç”±å®ˆå«

**ä½œç”¨**ï¼š**å¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶**

**åˆ†ç±»**ï¼š**å…¨å±€å®ˆå«**ã€**ç‹¬äº«å®ˆå«**å’Œ**ç»„ä»¶å†…å®ˆå«**

### 1.å…¨å±€å®ˆå«

ä¹¦å†™åœ¨`VueRouter({})`å†…ï¼Œå’Œ`routes:[]`åŒçº§

#### 1.1å…¨å±€å‰ç½®å®ˆå«

è¿›å…¥ä¸‹ä¸€ä¸ªç»„ä»¶ä¹‹**å‰**è§¦å‘

```js
router.beforeEach((to, from, next) => {
  // ...
})
```

**å‚æ•°**

1. **to**: è¦è¿›å…¥çš„ç›®æ ‡è·¯ç”±**å¯¹è±¡**ï¼ˆå»å“ªï¼‰

1. **from**: è¦ç¦»å¼€çš„è·¯ç”±**å¯¹è±¡**ï¼ˆä»å“ªæ¥ï¼‰

1. **next**: æ˜¯å¦è¦è¿›è¡Œä¸‹ä¸€æ­¥ï¼ˆè¦ä¸è¦ç»§ç»­ï¼‰
   - å†™`next()`ç›¸å½“äºÂ `next(true)`Â ç»§ç»­æ‰§è¡Œ

   - ä¸å†™ ç›¸å½“äº`next(false)`ç»ˆæ­¢æ‰§è¡Œ

   - `next(path)`è·³è½¬

```js
next('/login')
// æˆ–è€…
next({path:'/login'})
```



**ç™»å½•é‰´æƒ**

> permission.js

```js
import router from '@/router'
import store from '@/store'

router.beforeEach((to,from,next)=>{
    const whiteList=['/login','/login/sms','/login/token','/404']
    if(whiteList.includes(to.path)){
        next()
    }else{
        // storeä¸­è·å–token
        const token=store.state.users.token
        if(token){
            if(!store.state.auths.menu.length){
                // è·å–èœå•åˆ—è¡¨
                store.dispatch('auths/FETCH_MENU')
            }
            next()
        }else{
            next({path:'/login'})
        }
    }
})
```

åœ¨main.jsä¸­å¯¼å…¥

> main.js

```js
import "@/permission.js"
```




#### 1.2å…¨å±€åç½®å®ˆå«

è¿›å…¥ä¸‹ä¸€ä¸ªç»„ä»¶ä¹‹åè§¦å‘ï¼Œå¯ä»¥ç”¨æ¥æ”¹å˜é¡µé¢çš„**title**

```js
router.afterEach((to, from) => {
  // ...
})
```

**to**å’Œ**from**å±æ€§å’Œå‰ç½®å®ˆå«ä¸€æ ·

**æ³¨æ„ï¼šåç½®é’©å­afterEachæ²¡æœ‰nextå‚æ•°**



#### 1.3 meta

metaæ˜¯**è·¯ç”±routeé‡Œçš„ä¸€ä¸ªå¯¹è±¡**

å®ƒå¯ä»¥**åˆ‡æ¢ä¸åŒé¡µé¢æ˜¾ç¤ºä¸åŒçš„é¡µé¢æ ‡é¢˜æ–‡å­—,ä¹Ÿå¯ä»¥åˆ¤æ–­å®ˆå«æ”¾è¡Œçš„é¡µé¢**

ç»™metaè®¾ç½®**isAuth**å±æ€§å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ”¾è¡Œ

é€šè¿‡`this.$route`è·å–



#### 1.4å®ä¾‹

è¦ä½¿ç”¨ç†ç”±å®ˆå«ï¼Œå°±è¦è®²è·¯ç”±å…ˆåˆ›å»ºé…ç½®å†æš´éœ²ï¼Œä¸èƒ½ç›´æ¥æš´éœ²

```js
const router= new VueRouter({
Â  Â  routes: [
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  name:'guanyu',
Â  Â  Â  Â  Â  Â  path: '/about',
Â  Â  Â  Â  Â  Â  component: About,
Â  Â  Â  Â  Â  Â  meta:{title:'å…³äº'}
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  },
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  path: '/home',
Â  Â  Â  Â  Â  Â  name:'zhuye',
Â  Â  Â  Â  Â  Â  component: Home,
Â  Â  Â  Â  Â  Â  meta:{title:'ä¸»é¡µ'},
Â  Â  Â  Â  Â  Â  children: [
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name:'xinwen',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  path: 'news', Â  Â  Â  Â  Â  Â //ä¸éœ€è¦å†åŠ /
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  component: News,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  meta:{isAuth:true,title:'æ–°é—»'},
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name:'xiaoxi',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  path: 'message',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  component: Message,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  meta:{isAuth:true,title:'æ¶ˆæ¯'},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  children: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name:'xiangqing',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  path: 'detail',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  component: Detail,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  meta:{title:'è¯¦æƒ…'},
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  props({query}){
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id:query.id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title:query.title
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  }
Â  Â  ]
})
//å…¨å±€å‰ç½®è·¯ç”±å®ˆå«-----åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œæ¯æ¬¡è·¯ç”±åˆ‡æ¢è¢«è°ƒç”¨
router.beforeEach((to,from,next)=>{
Â  Â  console.log('å‰ç½®è·¯ç”±å®ˆå«',to,from);
Â  Â  
Â  Â if(to.meta.isAuth){ Â  //åˆ¤æ–­æ˜¯å¦éœ€è¦é‰´æƒ
Â  Â  Â  Â  if(localStorage.getItem('school')==='atguigu2'){
Â  Â  Â  Â  Â  Â  next()
Â  Â  Â  Â  }else{
Â  Â  Â  Â  Â  Â  alert('æ‚¨æ— æƒé€šè¡Œ')
Â  Â  Â  Â  }
Â  Â }else{
Â  Â  next()
Â  Â }
})



router.afterEach((to,from)=>{
Â  Â  document.title=to.meta.title||'ä½ å¥½'
})

export default router
```



### 2. ç‹¬äº«è·¯ç”±å®ˆå«

**beforeEnter**

ä¹¦å†™åœ¨**å•ç‹¬çš„è·¯ç”±é…ç½®é‡Œ**

```js
{
	name:'news',
	path:'news',
	component:News,
	beforeEnter:(to,from,next)=>{
		console.log('è·¯ç”±ç‹¬äº«')
	}
}
```



### 3. ç»„ä»¶å†…è·¯ç”±å®ˆå«

é¡¾åæ€ä¹‰ï¼Œç»„ä»¶å†…è·¯ç”±å®ˆå«éœ€è¦**åœ¨ç»„ä»¶å†…ä¹¦å†™**ï¼Œå¹¶éåœ¨router.jsæ–‡ä»¶ä¹¦å†™

```js
export default {
	name:'About',
	...
	//é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
	beforeRouteEnter(to,from,next){
		if(to.meta.isAuth){ //åˆ¤æ–­æ˜¯å¦éœ€è¦é‰´æƒ
        	next() //æ”¾è¡Œ
   		 }
	},
    //åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
    beforeRouteUpdate(to,from,next){
		...
	},
	//é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
	beforeRouteLeave(to,from,next){
		next() //æ”¾è¡Œ
	}
}
```





## 14. è·¯ç”±æ¨¡å¼

è·¯ç”±æ¨¡å¼æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«ä¸º**hash**ï¼Œ**history**ï¼Œ**abstract**

é€šè¿‡routeré‡Œçš„modeå±æ€§åˆ‡æ¢è·¯ç”±æ¨¡å¼

```js
const router=new VueRouter({
    mode:'history',
    routes:[...]
})
```

### 1.hashè·¯ç”±

1. æµè§ˆå™¨urlä¸­**#åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯hashå€¼**ï¼Œå¯é€šè¿‡`location.hash`è·å–
1. hashå€¼**ä¸ä¼šåŒ…å«åœ¨HTTPè¯·æ±‚ä¸­**ï¼Œå³ï¼šhashå€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨ã€‚è·¯ç”±**é»˜è®¤æ˜¯hashæ¨¡å¼**

#### 1.ä¼˜ç¼ºç‚¹ï¼š

1. åœ°å€ä¸­æ°¸è¿œå¸¦ç€`#`å·ï¼Œä¸ç¾è§‚ã€‚
1. è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•ã€‚
1. **å…¼å®¹æ€§è¾ƒå¥½ã€‚**

#### 2.åŸç†

**hash**è·¯ç”±æ˜¯ç”±`Bom Api`ä¸­çš„`location.hash`æ”¹å˜æµè§ˆå™¨åœ°å€ï¼Œé€šè¿‡`window.onhashchange`äº‹ä»¶ç›‘å¬åœ°å€æ å˜åŒ–ï¼Œä»è€Œåˆ‡æ¢ä¸åŒçš„ç»„ä»¶

é€šè¿‡`location.hash`åˆ‡æ¢`url`æ—¶ï¼Œé¡µé¢å¹¶ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œä¹Ÿä¸ä¼šåˆ·æ–°

```html
<body>
    <button class="btn">åˆ‡æ¢</button>
    <script>
        document.querySelector(".btn").addEventListener("click", () => {
            location.hash = "test";
            console.log(location.hash)
        });

        window.onhashchange = function (e) {
            console.log(e.newURL);
        };
    </script>
</body>
```



### 2.historyè·¯ç”±

#### 1.ä¼˜ç¼ºç‚¹

1. åœ°å€å¹²å‡€ï¼Œç¾è§‚ã€‚
1. å…¼å®¹æ€§å’Œhashæ¨¡å¼ç›¸æ¯”ç•¥å·®ï¼Œåˆ·æ–°ä¼šä¸¢å¤±é¡µé¢
1. åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡ç«¯404çš„é—®é¢˜ã€‚

#### 2.åŸç†

è¯­æ³•

```js
history.pushState(stateObject, title, url);
```

å‚æ•°

| å‚æ•°        | æè¿°                                                         |
| ----------- | ------------------------------------------------------------ |
| stateObject | ä¼ å…¥çš„çŠ¶æ€å¯¹è±¡ã€‚å½“å‰è¿›ï¼ˆåé€€ï¼‰åˆ°æŸä¸€æ–°çš„çŠ¶æ€æ—¶ï¼Œä¼šè§¦å‘popstateäº‹ä»¶ã€‚æ­¤äº‹ä»¶å¯¹è±¡event.stateå­˜å‚¨çš„å°±æ˜¯è¿™ä¸ªstateObjectçš„å€¼ã€‚ |
| title       | æ–°çŠ¶æ€çš„æ ‡é¢˜ã€‚ï¼ˆç›®å‰ï¼Œå¤§å¤šæ•°æµè§ˆå™¨å¹¶ä¸æ”¯æŒè¯¥å‚æ•°ï¼Œå»ºè®®ä¼ nullå€¼ï¼‰ |
| url         | çŠ¶æ€å¯¹åº”çš„å†å²è®°å½•çš„åœ°å€ã€‚                                   |

```html
<body>
    <button class="btn">åˆ‡æ¢</button>
    <script>
        document.querySelector(".btn").addEventListener("click", () => {
            history.pushState(null, null, "/test");
        });

        window.onpopstate = function (event) {
            console.log(event);
        };
    </script>
</body>
```

