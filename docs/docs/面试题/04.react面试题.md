# reacté¢è¯•é¢˜

  

## ğŸ’˜ 01-åŸºæœ¬è¯­æ³•

### ğŸŒŸ vueå’ŒreactåŒºåˆ«   å¾…å®Œå–„



### ğŸŒŸ diffç®—æ³•åŒºåˆ«   å¾…å®Œå–„



### ğŸŒ› jsxçš„ä¼˜ç‚¹



### ğŸŒ›babelåŸç†







### ğŸŒŸ å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶åŒºåˆ«

å‡½æ•°ç»„ä»¶ï¼šæ— çŠ¶æ€ä¹Ÿå°±æ˜¯æ¨¡å‹æ•°æ®ï¼Œæ— ç”Ÿå‘½å‘¨æœŸ   hooks
    ç±»ç»„ä»¶ï¼šæœ‰çŠ¶æ€ï¼Œæœ‰ç”Ÿå‘½å‘¨æœŸ



### ğŸŒŸ å‡½æ•°ç»„ä»¶å¦‚ä½•çŠ¶æ€ç®¡ç†

å¯ä»¥é€šè¿‡reduxã€æˆ– hookæ˜¯æ–°æŠ€æœ¯



### ğŸŒŸ çŠ¶æ€stateã€å’Œå±æ€§propsåŒºåˆ«ï¼›å¦‚ä½•é€‰

è¯­æ³•è§’åº¦

```
stateå¯ä»¥æ›´æ–°
propså› ä¸ºå•å‘æ•°æ®æµä¸å¯ä»¥æ›´æ”¹
```

åŠŸèƒ½è§’åº¦

```
stateä¸»è¦æ˜¯ç»„ä»¶å†…éƒ¨çŠ¶æ€ç®¡ç†ï¼Œä¾‹å¦‚æ”¶é›†è¡¨å•æ•°æ®ã€dialogçŠ¶æ€ç®¡ç†ç­‰ç­‰
propsä¸»è¦å­ç»„ä»¶ä¼ é€’å±æ€§ï¼Œä¾‹å¦‚æ™®é€šçš„buttonæŒ‰é’®ã€tableè¡¨æ ¼ã€pageåˆ†é¡µç­‰ç­‰éƒ½æœ‰å¤§é‡ä½¿ç”¨
```



### ğŸŒŸ ç±»ç»„ä»¶setStateåº•å±‚åŸç†   å¾…å®Œæˆ

æ•°æ®æ›´æ–°çš„æ—¶å€™åšäº†äº›ä»€ä¹ˆ



### ğŸŒ› ç±»ç»„ä»¶ç»§æ‰¿èƒ½ç»§æ‰¿å“ªäº›ä¸œè¥¿





### ğŸŒŸ è°ˆè°ˆä½ å¯¹å—æ§ç»„ä»¶ã€éå—æ§ç»„ä»¶çš„ç†è§£

å—æ§ç»„ä»¶ï¼šé€šè¿‡reactæ§åˆ¶è¡¨å•çš„è¾“å…¥è¾“å‡º

éå—æ§ç»„ä»¶ï¼šé€šè¿‡DOMæ“ä½œè¡¨å•æ•°æ®





### ğŸŒŸ åœ¨reactä¸­å®ç°ç»„ä»¶é€šä¿¡æœ‰å“ªäº›æ–¹å¼

çˆ¶ä¼ å­ï¼šprops

å­ä¼ çˆ¶ï¼šè°ƒç”¨çˆ¶çš„æ–¹æ³•

å…„å¼Ÿï¼šçŠ¶æ€æå‡

ç»„ä»¶å®ä¾‹ï¼šref    =ã€‹ å±äºrefè½¬å‘ã€refå¼•ç”¨å®ç°ç»„ä»¶é€šä¿¡

childrenå±æ€§ =ã€‹ä¹Ÿæ˜¯çˆ¶ä¼ å­ è¶…æ–‡æœ¬

context

çŠ¶æ€ç®¡ç†å·¥å…·ï¼šreduxã€redux-toolkit(RTK)ã€mobxç­‰

ç­‰ç­‰





## ğŸŒŸ childrenå±æ€§æœ‰å•¥ç”¨ï¼Œå“ªé‡Œç”¨

ä½œç”¨ï¼šè·å–ç»„ä»¶åŒæ ‡ç­¾é‡Œé¢çš„æ•°æ®

åœºæ™¯ï¼šå°è£…é¡µé¢ç»„ä»¶ã€å…¬å…±ç»„ä»¶ã€æˆ–è€…åå°ä¸¤æ å¸ƒå±€ç­‰ç­‰







## ğŸ’˜ 02-ç”Ÿå‘½å‘¨æœŸ

### ğŸŒŸ reactç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›&åº”ç”¨åœºæ™¯

```
å•è¯															è§¦å‘æœºåˆ¶ 			    åº”ç”¨åœºæ™¯

æŒ‚è½½
constructor						  				 é¦–æ¬¡					  	åˆå§‹åŒ–refã€stateç­‰å±æ€§
static getDerivedStateFromProps  é¦–æ¬¡&çŠ¶æ€/å±æ€§	    è¾ƒå°‘ï¼Œç›‘æ§propsæ›´æ–°state
componentWillMount				   		 é¦–æ¬¡			      		å¼ƒ1
render							  				  	é¦–æ¬¡&çŠ¶æ€/å±æ€§    æ¸²æŸ“é¡µé¢
componentDidMount				   		   é¦–æ¬¡				 		   å¼‚æ­¥è¯·æ±‚ã€æ“ä½œDOM å¦‚echartsã€swiper

æ›´æ–°å±æ€§/çŠ¶æ€

static getDerivedStateFromProps   é¦–æ¬¡&çŠ¶æ€/å±æ€§		è¾ƒå°‘ï¼Œç›‘æ§propsæ›´æ–°state
componentWillReceiveProps		   		ä»…å±æ€§				  	å¼ƒ2
shouldComponentUpdate   		   		å±æ€§/çŠ¶æ€					å­ç»„ä»¶å‡å°‘æ¸²æŸ“æ¬¡æ•°  æ€§èƒ½ä¼˜åŒ–
componentWillUpdate				   			å±æ€§/çŠ¶æ€					å¼ƒ3
render							  						é¦–æ¬¡&çŠ¶æ€/å±æ€§		 æ¸²æŸ“é¡µé¢
getSnapshotBeforeUpdate			   		å±æ€§/çŠ¶æ€	     DOMæ›´æ–°å‰æ”¶é›†DOMä¿¡æ¯äº¤ç»™componentDidUpdate
componentDidUpdate				   			å±æ€§/çŠ¶æ€			ç›‘æ§æ›´æ–°è¿›ä¸€æ­¥æ“ä½œDOMã€èŠå¤©ã€echarts

å¸è½½
componentWillUnmount			    		ç»„ä»¶å¸è½½			æ¸…é™¤éreactèµ„æº ä¾‹å¦‚ç™»é™†å®šæ—¶å™¨

é”™è¯¯
componentDidCatch				   				åä»£ç»„ä»¶å‘é”™å¼‚å¸¸é”™è¯¯
```





é—®1ï¼šreactç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›

ç­”1ï¼šæŒºå¤šçš„æŒ‚è½½ã€æ›´æ–°ã€å¸è½½ç­‰ç­‰ï¼Œç„¶åæˆ‘å¸¸ç”¨çš„å°±æ˜¯componentDidMount

é—®2ï¼šå…·ä½“å‘¢

ç­”2

```
componentWillMount
render
componentDidMount

componentWillUpdate
render
componentDidUpdate

componentWillUnmount
...
```





### ğŸŒŸ react16.3æ–°å¢äº†å“ªäº›ã€å¼ƒç”¨äº†å“ªäº›

æ–°å¢

```
å•è¯						      						è§¦å‘æœºåˆ¶  	    åœºæ™¯
static getDerivedStateFromProps   é¦–æ¬¡&å±æ€§/çŠ¶æ€    æ¡ˆä¾‹è¾ƒå°‘ï¼Œä¸»è¦ç›‘æ§propså˜åŒ–æ›´æ–°stateç”¨    
getSnapshotBeforeUpdate			 		  å±æ€§/çŠ¶æ€        æ¡ˆä¾‹æ›´å°‘ï¼Œåœ¨æ›´æ–°DOMä¹‹å‰æ”¶é›†DOMä¿¡æ¯
```

å¼ƒç”¨

```
componentWillMount				   	  é¦–æ¬¡			   		 å¼ƒ1
componentWillReceiveProps		   	ä»…å±æ€§				  	å¼ƒ2
componentWillUpdate				   		å±æ€§/çŠ¶æ€					å¼ƒ3
```





### ğŸŒŸ reactç”¨æ¥ä¼˜åŒ–æ€§èƒ½çš„æ˜¯å“ªä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œè¯´ä¸€ä¸‹å®æˆ˜å¦‚ä½•ä¼˜åŒ–ä½¿ç”¨

shouldComponentUpdate

é¿å…çˆ¶ç»„ä»¶æ›´æ–°çŠ¶æ€æˆ–è€…å±æ€§åé¿å…å­ç»„ä»¶ä¸å¿…è¦æ¸²æŸ“



### ğŸŒŸ çˆ¶ç»„ä»¶æ›´æ–°çŠ¶æ€æˆ–è€…å±æ€§å¦‚ä½•é¿å…å­ç»„ä»¶ä¸å¿…è¦æ¸²æŸ“

é€šè¿‡shouldComponentUpdate

æˆ–è€…ç›´æ¥ç»§æ‰¿PureComponent



### ğŸŒŸ è¯´å‡ºæ–°å¢çš„ç”Ÿå‘½å‘¨æœŸå„è‡ªåº”ç”¨åœºæ™¯

```
å•è¯						      						è§¦å‘æœºåˆ¶  	    åœºæ™¯
static getDerivedStateFromProps   é¦–æ¬¡&å±æ€§/çŠ¶æ€    æ¡ˆä¾‹è¾ƒå°‘ï¼Œä¸»è¦ç›‘æ§propså˜åŒ–æ›´æ–°stateç”¨    
getSnapshotBeforeUpdate			 		  å±æ€§/çŠ¶æ€        æ¡ˆä¾‹æ›´å°‘ï¼Œåœ¨æ›´æ–°DOMä¹‹å‰æ”¶é›†DOMä¿¡æ¯
```





### ğŸŒŸ çˆ¶å­ç»„ä»¶mountç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº

### ğŸŒŸ çˆ¶å­ç»„ä»¶updateç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº

```
çˆ¶å­åµŒå¥—ç”Ÿå‘½å‘¨æœŸï¼ˆä¸€èˆ¬ä¸ª1~2ä¸ªæ¦‚ç‡ï¼‰
	mount é¦–æ¬¡åˆ·æ–°æˆ–è€…ç»„ä»¶é”€æ¯åé‡æ–°åˆ›å»º**
		f will mount
		f render
			s will mount
			s render
			s did mount
		f did mount
	update 
		f will update
		f render
			s will receive props
			s will update
			s render
			s did update
		f did update
		
ç”Ÿå‘½å‘¨æœŸå½¢å‚äº†è§£ï¼šä»…ç»™ä½ ä¼ é€’æ„è¯† 
```









## ğŸ’˜ 03-çŠ¶æ€ç®¡ç†



### è°ˆè°ˆä½ å¯¹reduxç†è§£



### reduxå’ŒvuexåŒºåˆ«





### ğŸŒŸ reduxå·¥ä½œæµ

é¦–å…ˆå®šä¹‰storeã€reducer

ç„¶åé€šè¿‡dispatchæ›´æ–°æ•°æ®





### ğŸŒ›è°ˆè°ˆä½ å¯¹çº¯å‡½æ•°ã€å’Œå‰¯ä½œç”¨çš„ç†è§£ 

çº¯å‡½æ•°ï¼š reduceråªèƒ½è¿›è¡ŒçŠ¶æ€ç®¡ç†ã€ä¸èƒ½æœ‰å…¶ä»–å‰¯ä½œç”¨ 

å‰¯ä½œç”¨ï¼šå¼‚æ­¥è¯·æ±‚ã€æµè§ˆå™¨ç¼“å­˜ç­‰éƒ½ç®—å‰¯ä½œç”¨





### ğŸŒ›è°ˆè°ˆä½ å¯¹ä¸­é—´ä»¶çš„ç†è§£ 

ä¸­é—´ä»¶ï¼šä¸»è¦æ˜¯requestè¯·æ±‚å±‚ç”¨æ¥è¿‡æ»¤å¤„ç†æ•°æ®çš„ï¼Œç„¶ånextç»§ç»­å‘åå¤„ç†



reduxä¸­çš„ä¸­é—´ä»¶ä¸»è¦ç”¨æ¥å¤„ç†ä¸€äº›ã€å‰¯ä½œç”¨ã€‘å¤„ç†å®Œæˆä¹‹åï¼Œå†ã€dispatchã€‘è§¦å‘reducerå¤„ç†



è¿½é—®1ï¼šä½ ç”¨è¿‡å“ªäº›ä¸­é—´ä»¶

å›ç­”1ï¼šredux-loggerã€redux-thunkã€redux-saga



è¿½é—®2ï¼šredux-thunkã€redux-saga åŒºåˆ«

å›ç­”2ï¼šredux-thunk ä¼šæœ‰å¾ˆå¤šcallbackã€ redux-sagaæ˜¯åŸºäºes6 generatorå¼€å‘çš„  æ‰€ä»¥æ²¡æœ‰è¿™ä¸ªé—®é¢˜  



### ğŸŒŸæ·±æµ…æ‹·è´ 

é—®1ï¼šè°ˆè°ˆä½ å¯¹æ·±æ‹·è´ã€æµ…æ‹·è´çš„ç†è§£

ç­”1ï¼š

```
æµ…æ‹·è´ï¼šèµ‹å€¼åç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡**ä¹Ÿå°±æ˜¯æœ‰æ–°çš„ã€å †ã€‘åœ°å€**ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡é‡Œæœ‰åŸå¯¹è±¡çš„æ‰€æœ‰æ•°æ®ï¼Œå…¶ä¸­åŸå§‹ç±»å‹æ‹·è´å€¼ï¼Œå¼•ç”¨/å¯¹è±¡ç±»å‹æ‹·è´åœ°å€
æ·±æ‹·è´ï¼šèµ‹å€¼åç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡**ä¹Ÿå°±æ˜¯æœ‰æ–°çš„ã€å †ã€‘åœ°å€**ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡é‡Œæœ‰åŸå¯¹è±¡çš„æ‰€æœ‰æ•°æ®ï¼Œå®Œå…¨ç‹¬ç«‹äº’ä¸å½±å“
```

é—®2ï¼šå¦‚ä½•å®ç°æ·±æ‹·è´ 

ç­”2ï¼š

```
æµ…æ‹·è´ï¼šå±•å¼€è¿ç®—ç¬¦ã€Object.assign()ã€lodash.cloneã€Array.prototype.concat/slice
æ·±æ‹·è´ï¼šJSONå¯¹è±¡æ–¹å¼ã€è‡ªå·±å†™é€’å½’ã€lodash.cloneDeepã€immutable
```

é—®3ï¼šJSONå®ç°æ·±æ‹·è´çš„ç¼ºç‚¹   

```
åŸç†ï¼šæŠŠå¯¹è±¡è½¬æˆåŸºæœ¬æ•°æ®ç±»å‹åï¼Œå°±ç­‰äºå’Œä¹‹å‰çš„å †å†…å­˜æŠŠè”ç³»æ–­äº†ï¼Œåœ¨è½¬æˆå¯¹è±¡å¼€è¾Ÿäº†æ–°çš„å †å†…å­˜ç©ºé—´
ç‰¹ç‚¹
å¦‚æœå¯¹è±¡é‡Œæœ‰bigintç±»å‹ä¼šæŠ¥é”™ï¼Œå¯¹äºbigint ç±»å‹æ— æ³•è½¬æ¢
å¯¹äºundefined,symbol,function ç­‰ç±»å‹ä¼šä¸¢å¤±å¯¹åº”çš„å±æ€§
å¯¹äºerror regexp è¿™äº›ç±»å‹ï¼Œå±æ€§å€¼ä¼šå˜ç©º
å¯¹äºå±æ€§å€¼æ˜¯date ç­‰ç±»å‹çš„ï¼Œå±æ€§å€¼å˜æˆå­—ç¬¦ä¸²ï¼Œå°±ç®—å†æ¬¡è½¬æ¢å±æ€§å€¼ä¹Ÿè¿˜æ˜¯å­—ç¬¦ä¸²
```



### 15.Reduxçš„åŸç†

### 16.Reduceå’Œactionçš„åŒºåˆ«
### 17.Reduxç»„ä»¶ä¼ å€¼





## ğŸ’˜ 04-hooks

### ğŸŒŸ è°ˆè°ˆä½ å¯¹hooksç†è§£



###  ğŸŒŸ ç”¨hooks æ„ä¹‰



### ğŸŒŸ hookç§ç±»



### ğŸŒŸ è‡ªå·±å°è£…è¿‡å“ªäº›hook

  



### useDispatchå’ŒuseSelector

### useeffect 4ç§ç”¨æ³• 



### å¯¹å˜é‡åšç›‘æ§æ€ä¹ˆåšï¼ŸVueé‡Œå‘¢ï¼Ÿ



## ğŸ’˜ 05-è·¯ç”±

### v5è¯­æ³•å¤ä¹ ğŸŒ› 

```
import {
  BrowserRouter as Router, // historyæ¨¡å¼
  // æˆ–
  // HashRouter as Router, // hashæ¨¡å¼
  
  Route,   // ç”¨äºå®šä¹‰è·¯ç”±
  // Link,    // ç”¨äºè·³è½¬è·¯ç”±ï¼ˆå£°æ˜å¼å¯¼èˆªï¼‰
  NavLink,    // ç”¨äºè·³è½¬è·¯ç”±ï¼ˆå£°æ˜å¼å¯¼èˆªï¼‰
  Switch,     // è·¯çº¿åŒ¹é…Switch
  Redirect    // é‡å®šå‘è·¯ç”±
} from "react-router-dom";


<Router>

        <ul>
            <li><NavLink to="/dy">ç”µå½±</NavLink></li>
            <li><NavLink to="/yy">å½±é™¢</NavLink></li>
            <li><NavLink to="/th">ç‰¹æƒ </NavLink></li>
            <li><NavLink to="/my">æˆ‘çš„</NavLink></li>
        </ul>
        <hr />
        <Switch>
          <Route path="/"  component={Dy} exact />
          <Route path="/dy" component={Dy} />
          <Route path="/yy" component={Yy} />
          <Route path="/th" component={Th} />
          <Route path="/my"> <My /> </Route>
          <Route path="/404" component={()=><h1>404</h1>} />
          <Redirect to="/404" />
        </Switch>
</Router

```



### v5 è·¯ç”±ä¼ å‚ 3ç§ç±»

å‚æ•°ç§ç±»ï¼šqueryã€params

ä¼ å‚æ–¹å¼ï¼švue

```
queryã€path			     this.$router.push( {query, path} )		å®šä¹‰è·¯ç”±æ—¶ã€ä¸ç”¨ç®¡ã€‘åˆ·æ–°ã€ä¸ä¸¢å¤±ã€‘
paramsã€name å†™å†’å·    this.$router.push( {params, name} )  å®šä¹‰è·¯ç”±æ—¶ã€éœ€è¦ç®¡ã€‘åˆ·æ–°ã€ä¸ä¸¢å¤±ã€‘ 
paramsã€name ä¸å†™å†’å·	this.$router.push( {params, name} )  å®šä¹‰è·¯ç”±æ—¶ã€ä¸ç”¨ç®¡ã€‘åˆ·æ–°ã€ä¸¢å¤±ã€‘


è·å–å‚æ•°ï¼šthis.$route.params/query.å‚æ•°å
```

ä¼ å‚æ–¹å¼ï¼š

> - paramsä¼ å‚ï¼šå®šä¹‰è·¯ç”±æ—¶ã€éœ€è¦ç®¡ã€‘åˆ·æ–°ã€ä¸ä¸¢å¤±ã€‘ 
>
> ```
> è·³è½¬ï¼šthis.props.history.push({pathname:'/è·¯å¾„/6'})    	
> è·å–ï¼šthis.props.match.params.å‚æ•°å
> ```
>
> - stateä¼ å‚ ï¼šå®šä¹‰è·¯ç”±æ—¶ã€ä¸ç”¨ç®¡ã€‘åˆ·æ–°ã€BrowserRouterä¸ä¸¢å¤±ã€HashRouterä¸¢å¤±ã€‘
>
> ```
> è·³è½¬ï¼šthis.props.history.push({pathname:'/è·¯å¾„', state:{å‚æ•°å:å€¼,...}})  
> è·å–ï¼šthis.props.location.state.å‚æ•°å
> ```
>
> - queryä¼ å‚ï¼šå®šä¹‰è·¯ç”±æ—¶ã€ä¸ç”¨ç®¡ã€‘åˆ·æ–°ã€ä¸¢å¤±ã€‘     
>
> > æ³¨ï¼šæ­¤queryéæ¯”queryåœ°å€æ æ˜¯æ²¡æœ‰? åªæ˜¯å®ƒäº¤query
>
> ```
> è·³è½¬ï¼šthis.props.history.push({pathname:'/è·¯å¾„', query:{å‚æ•°å:å€¼,...}})
> è·å–ï¼šthis.props.location.query.å‚æ•°å
> ```
>
> - å…¶ä»–
>
> ```
> this.props.history.go(-1/2æ•°å­—)
> ```



### v5 ç™»å½•é‰´æƒPrivateRoute

```
import { Route, Redirect } from "react-router-dom"

function PrivateRoute(props) {
 // è·å–ç”¨æˆ·ä¿¡æ¯
 let token = localStorage.getItem('token')
 // åˆ¤æ–­
 if (token) {
     return <Route {...props} />
 }

 return <Redirect to="/login" />
}

export default PrivateRoute





<PrivateRoute path="/admin" exact component={Welcome} />
<PrivateRoute path="/admin/users" component={Users} />
<PrivateRoute path="/admin/orders" component={Orders} />
```



### v6 å‡çº§è¯­æ³•

- https://reactrouter.com/docs/en/v6/upgrading/v5 

- `<Switch>`é‡å‘½åä¸º`<Routes>`ã€‚

- `<Route>`çš„æ–°ç‰¹æ€§å˜æ›´ã€‚      æ³¨ï¼šcomponentã€element     ä¸ç”¨å†™exactã€elementå¯ä»¥ç›´æ¥é‰´æƒ

- åµŒå¥—è·¯ç”±å˜å¾—æ›´ç®€å•ã€‚     æ³¨ï¼šv5æ’æ§½ã€ v6ç›´æ¥å†™ 

- å»æ‰`<Redirect>`

- æ–°é’©å­`useRoutes`ä»£æ›¿`react-router-config`ã€‚  æ³¨ï¼š  å°±æ˜¯å’Œvueä¸€æ ·çš„è·¯ç”±

- å¤§å°å‡å°‘ï¼šä»`20kb`åˆ°`8kb`

- å¤§é‡ä½¿ç”¨[React hooks](https://reactjs.org/docs/hooks-intro.html)
- ç­‰ç­‰  





### v6 è¯­æ³•å¤ä¹ 

```
import {
  BrowserRouter as Router, // historyæ¨¡å¼
  // æˆ–
  // HashRouter as Router, // hashæ¨¡å¼
  
  Routes,
  Route,  	  // ç”¨äºå®šä¹‰è·¯ç”±
  NavLink,    // ç”¨äºè·³è½¬è·¯ç”±ï¼ˆå£°æ˜å¼å¯¼èˆªï¼‰
  // Link     // ç”¨äºè·³è½¬è·¯ç”±ï¼ˆå£°æ˜å¼å¯¼èˆªï¼‰
  Navigate,   // é‡å®šå‘ä»£æ›¿v5 Redirect
} from "react-router-dom";

<Router>
  <ul>
    <li><NavLink to="/dy">ç”µå½±</NavLink></li>
    <li><NavLink to="/yy">å½±é™¢</NavLink></li>
    <li><NavLink to="/th">ç‰¹æƒ </NavLink></li>
    <li><NavLink to="/my">æˆ‘çš„</NavLink></li>
  </ul>
  <hr />
  <Routes>
    <Route path="/" element={<Dy />} />
    <Route path="/dy" element={<Dy />} />
    <Route path="/yy" element={<Yy />} />
    <Route path="/th" element={<Th />} />
    <Route path="/my" element={<My />} />
    <Route path='*' element={<Navigate to='/' />} />
  </Routes>
</Router>

```





### v6 è·¯ç”±ä¼ å‚hooks

> paramsä¼ å‚ï¼šå®šä¹‰è·¯ç”±æ—¶ã€éœ€è¦ç®¡ã€‘åˆ·æ–°ã€ä¸ä¸¢å¤±ã€‘ 
>
> ```
> è·³è½¬ï¼šthis.props.history.push({pathname:'/è·¯å¾„/6'})    	
> è·å–ï¼šthis.props.match.params.å‚æ•°å
> ```
>
> stateä¼ å‚ ï¼šå®šä¹‰è·¯ç”±æ—¶ã€ä¸ç”¨ç®¡ã€‘åˆ·æ–°ã€BrowserRouterä¸ä¸¢å¤±ã€HashRouterä¸¢å¤±ã€‘
>
> ```
> è·³è½¬ï¼šthis.props.history.push({pathname:'/è·¯å¾„', state:{å‚æ•°å:å€¼,...}})  
> è·å–ï¼šthis.props.location.state.å‚æ•°å
> ```
>
> queryä¼ å‚ï¼šå®šä¹‰è·¯ç”±æ—¶ã€ä¸ç”¨ç®¡ã€‘åˆ·æ–°ã€ä¸¢å¤±ã€‘
>
> ```
> è·³è½¬ï¼šthis.props.history.push({pathname:'/è·¯å¾„', query:{å‚æ•°å:å€¼,...}})
> è·å–ï¼šthis.props.location.query.å‚æ•°å
> ```
>
> å…¶ä»–
>
> ```
> this.props.history.go(-1/2æ•°å­—)
> ```



| ç§ç±»       | hookså         | ä½œç”¨                | è¯­æ³•                                                         |
| ---------- | --------------- | ------------------- | ------------------------------------------------------------ |
| paramsä¼ å‚ | useParams       | è·å–paramså‚æ•°      | const {å‚æ•°å, ..., } = useParams()                          |
| stateä¼ å‚  | useLocation     | è·å–stateå‚æ•°       | const location = useLocation()                               |
| searchä¼ å‚ | useSearchParams | è·å–å¸¦`?`é—®å·çš„å‚æ•° | const [search,setSearch] = useSearchParams()    search.get(å‚æ•°å)   setSearch(å‚æ•°å=å€¼&..&å‚æ•°å=å€¼) |
|            |                 |                     |                                                              |
| å£°æ˜å¼å¯¼èˆª | \<Link> ç»„ä»¶    |                     | \<Link to="è·¯å¾„/1">                                                                                                                      \<Link to="è·¯å¾„?id=1"> |
| ç¼–ç¨‹å¼å¯¼èˆª | useNavigate     |                     | **const** navigate = useNavigate()                                                                                              navigate(  "è·¯å¾„/1"  )                                                                                                                                   navigate(  "è·¯å¾„", { state:{} }    )                                                                                                                                     navigate(  "è·¯å¾„?id=6"  )                                                                                              navigate(  1æˆ–-1 ) |



### v6ç™»å½•é‰´æƒrequireAuth

```
import {Navigate} from 'react-router-dom'

function RequireAuth({ children }) {
 let token = localStorage.getItem('token') 
 if (!token)
 {
   return <Navigate to="/login" />;
 } 

 return children
}

export default RequireAuth



 <>
   <Router>
     <Routes>
       <Route path="/" element={<Login />} />
       <Route path="/login" element={<Login />} />
       <Route
         path="/admin"
         element={
           <RequireAuth>
             <Layout />
           </RequireAuth>
         }
       >
         <Route index element={<Admin />} />
         <Route path="users" element={<Users />} />
         <Route path="orders" element={<Orders />} />
       </Route>
       <Route path="/404" element={<Err404 />}></Route>
       <Route path="/500" element={<Err500 />}></Route>
       <Route path="*" element={<Navigate to="/" />} />
     </Routes>
   </Router>
 </>
```





### v6 é›†ä¸­å¼è·¯ç”±æ¸²æŸ“useRoutes

> # src/index.js
>
> ```
> import React from "react";
> import ReactDOM from "react-dom/client";
> import App from "./App";
> 
> import { BrowserRouter } from "react-router-dom";
> 
> const root = ReactDOM.createRoot(document.getElementById("root"));
> root.render(
> <BrowserRouter>
> <App />
> </BrowserRouter>
> );
> 
> ```
>
> # src/App.jsxï¼ï¼ï¼
>
> ```
> // import Router from './router'
> 
> import { useRoutes } from "react-router-dom";
> import routes from './router'
> 
> function App() {
> return <fieldset>
>  <legend>App</legend>
>  {/* <Router /> */}
> 
>  {useRoutes(routes)}
> </fieldset>
> }
> 
> export default App
> ```
>
> # src/router/requireAuth.jsx
>
> ```
> import {Navigate} from 'react-router-dom'
> 
> function RequireAuth({ children }) {
> let token = localStorage.getItem('token') 
> if (!token)
> {
> return <Navigate to="/login" />;
> } 
> 
> return children
> }
> 
> export default RequireAuth
> ```
>
> # src/router/index.jsï¼ï¼ï¼
>
> ```
> import { lazy, Suspense } from "react";
> import { Navigate } from "react-router-dom";
> 
> import RequireAuth from "./requireAuth";
> 
> const Login = lazy(() => import("../pages/login"));
> const Admin = lazy(() => import("../pages/admin"));
> const Users = lazy(() => import("../pages/users"));
> const Orders = lazy(() => import("../pages/orders"));
> const Layout = lazy(() => import("../layout"));
> const Err404 = lazy(() => import("../components/err/err404"));
> const Err500 = lazy(() => import("../components/err/err500"));
> const lazyload = function (children) {
> 	return <Suspense fallback={<div>Loading...</div>}>{children}</Suspense>;
> };
> 
> const routes = [
>   { path: "/", element: lazyload(<Login />) },
>   {
>       path: "/admin",
>       element: lazyload(
>           <RequireAuth>
>           <Layout />
>           </RequireAuth>
>       ),
>       children: [
>           { index: true, element: lazyload(<Admin />) },
>           { path: "users", element: lazyload(<Users />) },
>           { path: "orders", element: lazyload(<Orders />) },
>       ],
>   },
>   { path: "/404", element: lazyload(<Err404 />) },
>   { path: "/500", element: lazyload(<Err500 />) },
>   { path: "*", element: <Navigate to="/404" /> },
> ];
> 
> export default routes;
> ```
>



### åµŒå¥—è·¯ç”±



v5  æ’æ§½æŠ€æœ¯

v6 ç›´æ¥å†™





### ç»„ä»¶æ‡’åŠ è½½

https://pro.ant.design/zh-CN/



```
import { lazy, Suspense } from "react";
import {
  BrowserRouter as Router,
  Routes,
  Route,
  Navigate,
} from "react-router-dom";

import RequireAuth from "./requireAuth";

import Layout from "../layout";
import Err404 from "../components/err/err404";
import Err500 from "../components/err/err500";

// import Login from "../pages/login";
// import Welcome from "../pages/welcome";
// import Users from "../pages/users";
// import Orders from "../pages/orders";
const Login = lazy(() => import("../pages/login"));
const Welcome = lazy(() => import("../pages/welcome"));
const Users = lazy(() => import("../pages/users"));
const Orders = lazy(() => import("../pages/orders"));
const lazyload = function (children) {
  return <Suspense fallback={<div>Loading...</div>}>{children}</Suspense>;
};

function RouterConfig() {
  return (
    <>
      <Router>
        <Routes>
          <Route path="/" element={lazyload(<Login />)} />
          <Route path="/login" element={<Login />} />
          <Route
            path="/admin"
            element={
              <RequireAuth>
                <Layout />
              </RequireAuth>
            }
          >
            <Route index={true} element={lazyload(<Welcome />)} />
            <Route path="/admin/users" element={lazyload(<Users />)} />
            <Route path="/admin/orders" element={lazyload(<Orders />)} />
          </Route>
          <Route path="/404" element={<Err404 />} />
          <Route path="/500" element={<Err500 />} />
          <Route path="*" element={<Navigate to="/404" />} />
        </Routes>
      </Router>
    </>
  );
}

export default RouterConfig;

```











## ğŸ’˜ 06-é¡¹ç›®å¼€å‘

### ğŸŒ› è°ˆè°ˆä½ reacté¡¹ç›®æ€ä¹ˆå®ç°çš„?



## 

### ğŸŒŸ é¡¹ç›®å¦‚ä½•ä¼˜åŒ–ï¼Ÿ





# ....



