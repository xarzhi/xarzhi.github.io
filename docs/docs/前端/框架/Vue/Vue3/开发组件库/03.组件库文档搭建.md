# ç»„ä»¶åº“æ–‡æ¡£æ­å»º

:::tip

ä½œè€…ï¼šoutsider_å‹äººA

é“¾æ¥ï¼š[ç¨€åœŸæ˜é‡‘](https://juejin.cn/post/7404274946433941516)

:::



æ¥ä¸Šå›æˆ‘ä»¬æ­å»ºå®Œç»„ä»¶åº“é¡¹ç›®ï¼Œç°åœ¨è¿˜å‰©ä¸‹ç»„ä»¶æ–‡æ¡£ï¼Œå› ä¸ºä» 0 å¼€å§‹æ­å»ºæ–‡æ¡£å¤ªè´¹æ—¶é—´ï¼Œæˆ‘æ¨èå¤§å®¶ä½¿ç”¨[vitepress](https://link.juejin.cn?target=https%3A%2F%2Fvitepress.dev%2Fzh%2F)è¿›è¡Œå¿«é€Ÿæ­å»ºï¼Œå®ƒå¯ä»¥å°†ä½ çš„ Markdown è½¬ä¸ºæ–‡æ¡£é¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å†™ md æ–‡ä»¶æ—¢å¯å¿«é€Ÿå®ç°æ–‡æ¡£å¼€å‘ã€‚å®ƒè‡ªå¸¦äº†å¾ˆå¤šæ ·å¼ï¼Œå¦‚æœä½ ä¸å–œæ¬¢ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸»é¢˜ï¼Œè‡ªå®šä¹‰ä¸»é¢˜çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼Œä½ ä¹Ÿå¯ä»¥æŸ¥è¯¢å®˜ç½‘ç›¸å…³æ–‡æ¡£è¿›è¡Œå­¦ä¹ ã€‚

## æ–‡æ¡£ç›®å½•ç»“æ„åˆ›å»º

ä¸ŠèŠ‚æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ª `docs` çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥éœ€è¦åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæˆ‘ä»¬çš„ç»„ä»¶åº“æ–‡æ¡£çš„é¡¹ç›®ã€‚

æˆ‘ä»¬åœ¨ `docs` ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤:

```bash
npx vitepress init
```

ä¸€ç›´å¾€ä¸‹è¿›è¡Œï¼Œä½ å°±ä¼šå¾—åˆ°è¿™æ ·çš„æ–‡ä»¶ç»“æ„ï¼š

![image-20250715114518901](https://gitee.com/xarzhi/picture/raw/master/img/image-20250715114518901.png)

æˆ‘ä»¬åœ¨ç»„ä»¶åº“æ ¹ç›®å½•ä¸‹å®‰è£…ä¸€ä¸‹ `vitepress` ä¾èµ–

```bash
pnpm i vitepress -D -w
```

ç„¶åæˆ‘ä»¬éœ€è¦åœ¨æ ¹ç›®å½•`package.json`ä¸­æ·»åŠ ä¸€ä¸‹ `vitepress` é¡¹ç›®è¿è¡Œå‘½ä»¤ï¼š

```json
{
  "name": "test-ui",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "vite examples",
    "test": "echo \"Error: no test specified\" && exit 1",
    "docs:dev": "vitepress dev docs", // æ–‡æ¡£devç¯å¢ƒè¿è¡Œ
    "docs:build": "vitepress build docs", // æ–‡æ¡£æ‰“åŒ…
    "docs:preview": "vitepress preview docs" // æ–‡æ¡£é¢„è§ˆ
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "@test-ui/components": "workspace:^",
    "@test-ui/examples": "workspace:^"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.1.2",
    "vite": "^5.3.5",
    "vitepress": "^1.3.2"
  }
}
```

æ‰§è¡Œè¿è¡Œå‘½ä»¤ï¼Œè¿è¡Œçœ‹ä¸€ä¸‹æ˜¯å¦èƒ½æ­£å¸¸å¯åŠ¨

```bash
npm run docs:dev
```

![image-20250715114558936](https://gitee.com/xarzhi/picture/raw/master/img/image-20250715114558936.png)

è¿™å°±è¡¨æ˜å·²ç»æˆåŠŸè¿è¡Œäº†ï¼Œè¯´ä¸€ä¸‹é‡ç‚¹çš„æ–‡ä»¶

```text
â”œâ”€ docs // ç«™ç‚¹é¡¹ç›®æ ¹ç›®å½•
â”‚  â”œâ”€ .vitepress // VitePress é…ç½®æ–‡ä»¶ã€å¼€å‘æœåŠ¡å™¨ç¼“å­˜ã€æ„å»ºè¾“å‡ºå’Œå¯é€‰ä¸»é¢˜è‡ªå®šä¹‰ä»£ç çš„ä½ç½®
â”‚  â”‚  â””â”€ config.js // é…ç½®æ–‡ä»¶
â”‚  â”œâ”€ api-examples.md
â”‚  â”œâ”€ markdown-examples.md
â”‚  â””â”€ index.md // é»˜è®¤é¦–é¡µ
â””â”€ package.json
```

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬ç»„ä»¶è¿›è¡Œæ³¨å†Œã€‚

## ç»„ä»¶çš„æ³¨å†Œä»¥åŠä½¿ç”¨

è¦åœ¨ç»„ä»¶åº“ä¸­æ˜¾ç¤ºå‡ºç»„ä»¶ï¼Œæˆ‘ä»¬å¿…é¡»å¾—å°†æˆ‘ä»¬å¼€å‘çš„ç»„ä»¶åº“å®‰è£…åˆ°è¿™ä¸ª vitepress é¡¹ç›®ä¸­ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå»å®‰è£…å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡[è‡ªå®šä¹‰ä¸»é¢˜](https://vitepress.dev/zh/guide/custom-theme)æ¥å¯¹å½“å‰çš„é¡¹ç›®è¿›è¡Œå®‰è£…ä»»ä½•åŒ…ï¼ŒåŒ…æ‹¬æˆ‘ä»¬çš„ç»„ä»¶åº“ã€‚

æ ¹æ®å®˜ç½‘æ‰€è¯´ï¼Œæˆ‘ä»¬éœ€è¦åœ¨`.vitepress`æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª `theme` æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª `index.js` æˆ–è€… `index.ts` æ–‡ä»¶ä½œä¸ºä¸»é¢˜å…¥å£æ–‡ä»¶ã€‚

```bash
.
â”œâ”€ docs                # é¡¹ç›®æ ¹ç›®å½•
â”‚  â”œâ”€ .vitepress
â”‚  â”‚  â”œâ”€ theme
â”‚  â”‚  â”‚  â””â”€ index.js   # ä¸»é¢˜å…¥å£
â”‚  â”‚  â””â”€ config.js     # é…ç½®æ–‡ä»¶
â”‚  â””â”€ index.md
â””â”€ package.json
```

å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```ts
import DefaultTheme from "vitepress/theme";
import TestUI from "@test-ui/components";

export default {
  ...DefaultTheme,
  enhanceApp: async ({ app, router, siteData }) => {
    app.use(TestUI);
  },
};
```

`enhanceApp` å¯¹åº”çš„å‡½æ•°å…¥å‚ä¸­ `app` ä»£è¡¨å½“å‰ vue å®ä¾‹ï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œæ³¨å†Œç»„ä»¶ã€å®šä¹‰æŒ‡ä»¤ç­‰ç­‰ã€‚

æˆ‘ä»¬æ¸…ç©ºä¸€ä¸‹é»˜è®¤å¸¦çš„`markdown-examples.md`ï¼Œç›´æ¥å†™å…¥æˆ‘ä»¬çš„ç»„ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦æˆåŠŸæ¸²æŸ“ã€‚

![image-20250715114618230](https://gitee.com/xarzhi/picture/raw/master/img/image-20250715114618230.png)

å¥½è€¶ ğŸ‰ çœ‹æ¥æ˜¯å·²ç»æˆåŠŸæ¸²æŸ“äº†ï¼Œç”±äº vitepress æœ‰é»˜è®¤çš„æ ·å¼ï¼Œæˆ‘ä»¬çš„ button æ ·å¼å·²ç»è¢«é‡ç½®äº†ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ç»„ä»¶æ ·å¼æ¥çœ‹çœ‹

> ç›®å‰æˆ‘ç”¨çš„æ˜¯ less é¢„ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªå¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½æ¥é€‰æ‹©ä½ çš„ç»„ä»¶åº“ css é¢„ç¼–è¯‘å™¨ æ ¹ç›®å½•ä¸‹å®‰è£… pnpm i less less-loader -D -w åœ¨ `theme-chalk` æ–‡ä»¶å¤¹ä¸‹åˆ›å»º `index.less` æ–‡ä»¶ä½œä¸ºç»„ä»¶åº“æ ·å¼å…¥å£æ–‡ä»¶ï¼Œåç»­æˆ‘ä»¬ç¼–å†™ç»„ä»¶çš„æ—¶å€™å†å…·ä½“åˆ’åˆ†ç»“æ„

æˆ‘ä»¬åœ¨ `theme-chalk` ä¸‹ `index.less` æ–‡ä»¶ä¸­ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„ button ç»„ä»¶æ ·å¼ï¼Œå¹¶åœ¨æ–‡æ¡£æ³¨å†Œæˆ‘ä»¬ç»„ä»¶çš„åœ°æ–¹å¯¼å…¥æˆ‘ä»¬ç»„ä»¶çš„æ ·å¼æ–‡ä»¶ã€‚

```css
.t-button {
  display: inline-block;
  border: 1px solid #ddd;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 14px;
  background-color: #409eff;
  color: #fff;
}
js ä½“éªŒAIä»£ç åŠ©æ‰‹ ä»£ç è§£è¯»å¤åˆ¶ä»£ç import DefaultTheme from "vitepress/theme";
import TestUI from "@test-ui/components";
import "@test-ui/theme-chalk/index.less"; // å¼•å…¥æ ·å¼æ–‡ä»¶

export default {
  ...DefaultTheme,
  enhanceApp: async ({ app, router, siteData }) => {
    app.use(TestUI);
  },
};
```

ç»“æœå¦‚ä¸‹ï¼š

![image-20250715114642721](https://gitee.com/xarzhi/picture/raw/master/img/image-20250715114642721.png)

## æºç é¢„è§ˆç»„ä»¶

åœ¨è®¸å¤šç»„ä»¶æ–‡æ¡£ä¸­ï¼Œç»„ä»¶ç¤ºä¾‹ä¸‹é¢éƒ½æœ‰ç»„ä»¶çš„æºç ï¼Œæˆ‘ä»¬ä¹Ÿè‡ªå·±å°è£…ä¸€ä¸ªæ—¢å¯ä»¥çœ‹ç¤ºä¾‹åˆå¯ä»¥çœ‹æºç çš„ç»„ä»¶

å¥½äº†ï¼Œç°åœ¨é—®é¢˜è¿˜æœ‰ä¸¤ä¸ªï¼š

1. æ€ä¹ˆè¯»å– vue æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²ï¼Ÿ
2. æ€ä¹ˆæ›´å¥½çš„æ’ç‰ˆä»¥åŠé«˜äº®æˆ‘ä»¬ç¤ºä¾‹ä»£ç ï¼Ÿ

æˆ‘ç›´æ¥å…¬å¸ƒç­”æ¡ˆï¼š

1. `vite` ä¸­èµ„æºå¯ä»¥ä½¿ç”¨ `?raw` åç¼€å£°æ˜ä½œä¸ºå­—ç¬¦ä¸²å¼•å…¥ï¼Œvite å®˜ç½‘æ–‡æ¡£ï¼š[å°†èµ„æºå¼•å…¥ä¸ºå­—ç¬¦ä¸²](https://cn.vitejs.dev/guide/assets#importing-asset-as-string)
2. [highlight.js](https://highlightjs.org/) äº’è”ç½‘ä¸Šæœ€å—æ¬¢è¿çš„ `JavaScript` è¯­æ³•é«˜äº®å™¨ï¼Œæ”¯æŒ 192 ç§è¯­è¨€å’Œ 498 ä¸ªä¸»é¢˜ã€‚

å¥½äº†ï¼Œæˆ‘ä»¬å¼€å§‹åŠ¨æ‰‹æ¥å¼€å‘ä¸€ä¸ªè¿™ä¸ªé¢„è§ˆç»„ä»¶å§ï¼

æˆ‘ä»¬åœ¨æ–‡æ¡£çš„é¡¹ç›®ä¸­ `theme` æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª `preview` æ–‡ä»¶å¤¹ç„¶ååœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ª vue æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦å‡†å¤‡å¼€å‘çš„ç»„ä»¶ã€‚æˆ‘ä»¬éšä¾¿ç»™é‡Œé¢å†™ç‚¹ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¸Šé¢è¯´äº† `theme` æ–‡ä»¶å¤¹ä¸‹çš„ index.js æ–‡ä»¶ä¸­ `enhanceApp` æ–¹æ³•å¯ä»¥é€šè¿‡å…¥å‚ä¸­çš„ `app` ç›¸å½“äºå½“å‰ç»„ä»¶åº“æ–‡æ¡£çš„ vue å®ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªä¸Šé¢è¿›è¡Œæ³¨å†Œæˆ‘ä»¬çš„ç»„ä»¶.

preview ç»„ä»¶ï¼š

:::code-group

```vue [preview.vue]
<template>
  <div><slot /></div>
</template>

<script setup></script>

<style scoped></style>
```

```js
import DefaultTheme from "vitepress/theme";
import TestUI from "@test-ui/components";
import "@test-ui/theme-chalk/index.less"; // å¼•å…¥æ ·å¼æ–‡ä»¶
import Preview from "./preview/index.vue";

export default {
  ...DefaultTheme,
  enhanceApp: async ({ app, router, siteData }) => {
    app.use(TestUI);
    app.component("preview", Preview); // æ³¨å†Œé¢„è§ˆåŠŸèƒ½çš„ç»„ä»¶
  },
};
```

:::



æˆ‘ä»¬åœ¨`markdown-examples.md`ä¸­ä½¿ç”¨ä¸€ä¸‹æˆ‘ä»¬æ³¨å†Œçš„ç»„ä»¶ï¼Œå‘ç°å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œé‚£è¯´æ˜æˆ‘ä»¬æˆåŠŸæ³¨å†Œäº†ï¼Œæ¥ä¸‹æ¥å°±è¦å†™é€»è¾‘äº†ã€‚

å› ä¸ºæˆ‘ä»¬åç»­æœ‰å¾ˆå¤šç»„ä»¶çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬éœ€è¦è§„åˆ’ä¸€ä¸‹æˆ‘ä»¬ç»„ä»¶æ–‡æ¡£çš„ç»“æ„ï¼Œæˆ‘ä»¬åˆ›å»ºå¦‚ä¸‹æ–‡æ¡£ç»“æ„ï¼Œä¾¿äºæˆ‘ä»¬æ¸…æ™°ä¸»è§‚çš„ä¹¦å†™ç»„ä»¶æ–‡æ¡£ï¼Œdemo.vue æˆ‘ä»¬ä¼šå†™ç»„ä»¶çš„ä½¿ç”¨ä»£ç ï¼Œindex.md å°±æ˜¯æˆ‘ä»¬ä¸€ä¸ªç»„ä»¶æ‰€æœ‰çš„ä½¿ç”¨è¯´æ˜ã€‚

![image-20250715114655283](https://gitee.com/xarzhi/picture/raw/master/img/image-20250715114655283.png)

> index.md

```md
# Button æŒ‰é’®

<preview>
  <t-button>button</t-button>
</preview>
```

æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ `config.mts` é…ç½®æ–‡ä»¶

```ts
import { defineConfig } from "vitepress";

export default defineConfig({
  title: "My Awesome Project",
  description: "A VitePress Site",
  themeConfig: {
    nav: [
      { text: "é¦–é¡µ", link: "/" },
      { text: "ç»„ä»¶", link: "/components/button/" },
    ],

    sidebar: {
      "/components/": [
        {
          text: "åŸºæœ¬",
          items: [{ text: "Button æŒ‰é’®", link: "/components/button/" }],
        },
      ],
    },
    socialLinks: [{ icon: "github", link: "https://github.com/vuejs/vitepress" }],
  },
});
```

ä¿®æ”¹å®Œæˆä¹‹åæˆ‘ä»¬æ˜¯è¿™ä¸ªæ ·å­

![image-20250715114722339](https://gitee.com/xarzhi/picture/raw/master/img/image-20250715114722339.png)

æˆ‘ä»¬å®‰è£…ä¸€ä¸‹ `highlight.js`

```bash
pnpm i highlight.js @highlightjs/vue-plugin -w
```

ç„¶ååœ¨æ–‡æ¡£é¡¹ç›®ä¸­ä½¿ç”¨

```js
import DefaultTheme from "vitepress/theme";
import TestUI from "@test-ui/components";
import "@test-ui/theme-chalk/index.less"; // å¼•å…¥æ ·å¼æ–‡ä»¶
import Preview from "./preview/index.vue";
import "highlight.js/styles/base16/summerfruit-light.css"; // ä¸»é¢˜
import hljsVuePlugin from "@highlightjs/vue-plugin";

export default {
  ...DefaultTheme,
  enhanceApp: async ({ app, router, siteData }) => {
    app.use(TestUI);
    app.component("preview", Preview); // æ³¨å†Œé¢„è§ˆåŠŸèƒ½çš„ç»„ä»¶
    app.use(hljsVuePlugin);
  },
};
```

`preview` ç»„ä»¶çš„å°è£…å¦‚ä¸‹ä»£ç ï¼Œç›¸ä¿¡å¤§å®¶éƒ½èƒ½çœ‹æ‡‚ï¼Œå°±ä¸åšè§£é‡Šäº†

```vue
<template>
  <div class="demo_preview">
    <div class="preview_box">
      <slot />
    </div>
    <div class="code_box">
      <div class="code" :class="{ show_code: showCode }">
        <div class="code__reference">
          <div class="code_content">
            <highlightjs autodetect :code="sourceCode" />
          </div>
        </div>
      </div>
      <div class="operate_btn" @click="handleClick">
          {{ showCode ? "éšè—" : "æ˜¾ç¤º" }}ä»£ç 
      </div>
    </div>
  </div>
</template>

<script setup>
import { onMounted, reactive, toRefs } from "vue";
import "highlight.js";

const props = defineProps({
  compName: {
    type: String,
    default: "",
  },
  demoName: {
    type: String,
    default: "",
  },
});

onMounted(() => {
  componentCode();
});

const state = reactive({
  sourceCode: "",
  showCode: false,
  demoHTML: "",
});

const { sourceCode, showCode, demoHTML } = toRefs(state);

const componentCode = async () => {
  const data = await import(`../../../components/${props.compName}/${props.demoName}.vue?raw`);
  state.sourceCode = data.default;
};

const handleClick = () => {
  state.showCode = !state.showCode;
};
</script>

<style scoped>
.demo_preview {
  margin: 20px 0;
  border: 1px solid #efefef;
  border-radius: 6px;
  overflow: hidden;
}
.preview_box {
  padding: 20px;
}
.operate_btn {
  position: relative;
  height: 46px;
  line-height: 46px;
  color: #666;
  text-align: center;
  background: #f7f7f7;
  cursor: pointer;
  z-index: 100;
}
.operate_btn:hover {
  background: #f2f2f2;
}
.code {
  border-top: 1px solid #efefef;
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.3s ease;
}
.code .code__reference {
  overflow: hidden;
}
.show_code {
  grid-template-rows: 1fr;
}
</style>
```

æˆ‘ä»¬åœ¨ `demo1.vue` çš„æ–‡ä»¶ä¸­å†™å‡ ä¸ªç¤ºä¾‹

```vue
<template>
  <t-button>aaa</t-button>
  <t-button>bbb</t-button>
</template>
```

æˆ‘ä»¬é‡æ–°ä¿®æ”¹ä¸€ä¸‹ button çš„ md æ–‡æ¡£

```markdown
<script setup>
import demo1 from './demo1.vue'
</script>

# Button æŒ‰é’®

<preview comp-name="button" demo-name="demo1">
  <demo1/>
</preview>
```

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼š

![image-20250715114752398](https://gitee.com/xarzhi/picture/raw/master/img/image-20250715114752398.png)

åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„ç»„ä»¶åº“æ–‡æ¡£å¤§ä½“å·²ç»å®Œæˆäº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯å¤§å®¶è‡ªå·±æ ¹æ®å–œå¥½å»é…ç½®ä½ çš„é¦–é¡µã€èœå•ä¹‹ç±»çš„ï¼Œä¸‹èŠ‚æˆ‘ä»¬å°†å¼€å§‹å°è£…ç»„ä»¶ï¼Œè¿˜å¸Œæœ›å¤§å®¶èƒ½å¤ŸæŒç»­å…³æ³¨ï¼Œå¤šå¤šç‚¹èµ ğŸ¤
