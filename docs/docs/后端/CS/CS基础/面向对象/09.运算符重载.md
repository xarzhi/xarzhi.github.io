# 运算符重载

运算符重载，就是**在一个类中**，**对已有的运算符重新进行定义**，赋予其另一种功能，以适应不同的数据类型。

## 1.语法

通过`operator`关键字，在一个类中重载一个运算符，运算符声明必须符合以下规则：

- 同时包含 `public` 和 `static` 修饰符。

```cs
class Myclass{
	public static 返回类型 operator 运算符(参数列表){
       // return ...
    }
}
```

使用实例

```cs {9-11,21}
using System;
class Point {
    public int x;
    public int y;
    public Point(int x, int y) { 
        this.x = x;
        this.y = y;
    }
    public static Point operator +(Point a, Point b) { 
        return new Point(a.x+b.x,a.y+b.y);
    }
}


class Program
{
    static void Main()
    {
        Point p1 = new Point(1, 1);
        Point p2 = new Point(2, 2);
        Point p3 = p1 + p2;

        Console.WriteLine(p3.x);    // 3
        Console.WriteLine(p3.y);    // 3

        Console.ReadKey();
    }
}
```

:::tip

在这些运算符中，分为一元运算符和二元运算符

- 需要一个操作数的为一元运算符，比如：++、--等等
- 需要两个操作数的为二元运算符，比如：+、-、*、/、+=等等

:::



## 2.可重载运算符

| 运算符                          | 说明                                                   |
| ------------------------------- | ------------------------------------------------------ |
| +、-、!、~、++、--、true、false | 可以重载这些一元运算符， true和false运算符必须成对重载 |
| +、-、*、/、%、&、\|、^、<<、>> | 可以重载这些二元运算符                                 |
| ==、!=、<、>、<=、>=            | 可以重载比较运算符，**必须成对重载**                   |



## 3.不可重载运算符

| 运算符                                    | 说明                                                         |
| ----------------------------------------- | ------------------------------------------------------------ |
| &&、\|\|                                  | 不能重载条件逻辑运算符，但可以使用能够重载的&和\|进行计算    |
| []                                        | 不能重载数组索引运算符，但可以定义索引器                     |
| ()                                        | 不能重载转换运算符，但可以定义新的转换运算符（请参见 explicit 和 implicit） |
| +=、-=、*=、/=、%=、&=、\|=、^=、<<=、>>= | 不能显式重载赋值运算符，在重写单个运算符如+、-、%时，它们会被  隐式重写 |
| =、.、?:、->、new、is、sizeof、typeof     | 不能重载这些运算符                                           |